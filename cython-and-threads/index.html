<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=5" name="viewport"><meta content="yes" name="mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><title>Cython and Threads</title><meta itemprop="title" content="Cython and Threads - hsfzxjy 的博客"><meta itemprop="og:title" content="Cython and Threads - hsfzxjy 的博客"><meta itemprop="image" content="https://i.hsfzxjy.site/avatar-for-hsfzxjy.jpg"><meta itemprop="og:image" content="https://i.hsfzxjy.site/avatar-for-hsfzxjy.jpg"><meta itemprop="description" content="Pure Python sucks in the scene of parallel computing, due..."><meta itemprop="og:type" content="website"><link rel="stylesheet" href="/dist/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="alternate" type="application/rss+xml" href="/rss.xml"></head><body><nav class="nav"><span class="nav__toggler"><span class="nav__toggler-bar bar1"></span><span class="nav__toggler-bar bar2"></span><span class="nav__toggler-bar bar3"></span></span><span class="nav__core"><div class="nav__logo"><img src="/avatar.webp" loading="lazy"></div><a href="/" lang="zh" class="nav__brand">hsfzxjy</a></span><span class="nav__togglerClose"><span class="nav__togglerClose-circle"></span><span class="nav__togglerClose-bar bar1"></span><span class="nav__togglerClose-bar bar2"></span></span><div class="nav__pathIndicator"><a href="/categories/Tech/">Tech</a></div></nav><main class="mainContainer"><div lang="en" class="post post-page"><h1 lang="en" class="post__title">Cython and Threads</h1><div class="post__meta font__ui">2021-05-07 | <span class="post__meta-categories"><a href="/categories/Tech/">Tech</a></span></div><div class="post__content font__body"><p>Pure Python <em>sucks</em> in the scene of parallel computing, due to the existence of the Global Interpreter Lock (aka GIL). GIL prevents accessing or manipulating interpreter from different threads concurrently. The mechanism alleviates the risk of race condition, but sequentializes multi-threading program <sup id="fnref:1"><a href="#fn:1">1</a></sup> as well. Sadly, there’s no way to release the lock from pure Python.</p><p>Alright. So what about beyond pure Python? Shall we bypass the mechanism within an extension? The answer is yes, and that’s what most of scientific computing libaries do.</p><p>Cython is a good choice for writing extensions, less verbose, and more similar to Python syntactically. In Cython, one can release GIL temporarily for a code block using the <code>with nogil:</code> syntax. Will it release the true power of multi-core CPU? We should have a try.</p><p>We adopt a toy example, say, a naive matrix multiplication, for benchmarking. Start with a C-only version:</p><div class="gk-code hljs" data-gk-id="BLOCK1"><div class="gk-code-display"><pre><span class="line"><span class="hljs-comment">#cython: boundscheck=False</span></span><br><span class="line"><span class="hljs-comment">#cython: wraparound=False</span></span><br><span class="line"><span class="hljs-comment">#cython: nonecheck=False</span></span><br><span class="line"><span class="hljs-comment">#cython: cdivision=True</span></span><br><span class="line"><span class="hljs-comment">#cython: languagelevel=3</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np</span><br><span class="line">cimport numpy <span class="hljs-keyword">as</span> np</span><br><span class="line"></span><br><span class="line">cdef void _matmul(</span><br><span class="line">    np.float_t[:, :] Av,</span><br><span class="line">    np.float_t[:, :] Bv,</span><br><span class="line">    np.float_t[:, :] Cv,</span><br><span class="line">    <span class="hljs-built_in">int</span> M, <span class="hljs-built_in">int</span> N, <span class="hljs-built_in">int</span> P,</span><br><span class="line">) nogil:</span><br><span class="line">    cdef <span class="hljs-built_in">int</span> i, j, k</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(M):</span><br><span class="line">        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(P):</span><br><span class="line">            <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):</span><br><span class="line">                Cv[i, j] += Av[i, k] * Bv[k, j]</span><br></pre></div></div><p class="par">The function above is straight-forward. We then create a wrapper for it, so that it can be called by Python code:</p><div class="gk-code hljs" data-gk-id="BLOCK2"><div class="gk-code-display"><pre><span class="line">cpdef matmul(</span><br><span class="line">    np.ndarray[dtype=np.float_t, ndim=<span class="hljs-number">2</span>] A,</span><br><span class="line">    np.ndarray[dtype=np.float_t, ndim=<span class="hljs-number">2</span>] B,</span><br><span class="line">    <span class="hljs-built_in">object</span> use_gil,</span><br><span class="line">):</span><br><span class="line">    cdef <span class="hljs-built_in">int</span> M = A.shape[<span class="hljs-number">0</span>]</span><br><span class="line">    cdef <span class="hljs-built_in">int</span> N = A.shape[<span class="hljs-number">1</span>]</span><br><span class="line">    cdef <span class="hljs-built_in">int</span> P = B.shape[<span class="hljs-number">1</span>]</span><br><span class="line"></span><br><span class="line">    C = np.zeros((M, P))</span><br><span class="line">    cdef np.float_t[:, :] Av = A, Bv = B, Cv = C</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">if</span> use_gil:</span><br><span class="line">        _matmul(Av, Bv, Cv, M, N, P)</span><br><span class="line">    <span class="hljs-keyword">else</span>:</span><br><span class="line">        <span class="hljs-keyword">with</span> nogil:</span><br><span class="line">            _matmul(Av, Bv, Cv, M, N, P)</span><br><span class="line">    <span class="hljs-keyword">return</span> C</span><br></pre></div></div><p class="par">Now the Cython part is ready. Below a script for benchmarking:</p><div class="gk-code hljs" data-gk-id="BLOCK3"><div class="gk-code-display"><pre><span class="line"><span class="hljs-keyword">import</span> timeit</span><br><span class="line"><span class="hljs-keyword">import</span> threading</span><br><span class="line"><span class="hljs-keyword">import</span> itertools</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> pyximport</span><br><span class="line"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np</span><br><span class="line"></span><br><span class="line">pyximport.install(setup_args={<span class="hljs-string">&quot;include_dirs&quot;</span>: np.get_include()}, inplace=<span class="hljs-literal">True</span>, language_level=<span class="hljs-number">3</span>)</span><br><span class="line"><span class="hljs-keyword">import</span> matmul</span><br><span class="line"></span><br><span class="line">N = <span class="hljs-number">1200</span></span><br><span class="line">A = np.random.rand(N, N)</span><br><span class="line">B = np.random.rand(N, N)</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">def</span> <span class="hljs-title function_">runner</span>(<span class="hljs-params">nthreads: <span class="hljs-built_in">int</span>, use_gil: <span class="hljs-built_in">bool</span></span>) -&gt; <span class="hljs-literal">None</span>:</span><br><span class="line">    args = (A, B, use_gil)</span><br><span class="line"></span><br><span class="line">    threads = []</span><br><span class="line">    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(nthreads):</span><br><span class="line">        threads.append(threading.Thread(target=matmul.matmul, args=args))</span><br><span class="line">        threads[-<span class="hljs-number">1</span>].start()</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">for</span> thread <span class="hljs-keyword">in</span> threads:</span><br><span class="line">        thread.join()</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">def</span> <span class="hljs-title function_">make_grid</span>(<span class="hljs-params">**kwargs</span>):</span><br><span class="line">    space = [[(name, v) <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> lst] <span class="hljs-keyword">for</span> name, lst <span class="hljs-keyword">in</span> kwargs.items()]</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-built_in">map</span>(<span class="hljs-built_in">dict</span>, itertools.product(*space))</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">for</span> kw <span class="hljs-keyword">in</span> make_grid(</span><br><span class="line">        nthreads=[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>],</span><br><span class="line">        use_gil=[<span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>],</span><br><span class="line">):</span><br><span class="line">    <span class="hljs-built_in">print</span>(kw)</span><br><span class="line">    <span class="hljs-built_in">print</span>(timeit.timeit(<span class="hljs-string">&quot;runner(**kw)&quot;</span>, <span class="hljs-built_in">globals</span>=<span class="hljs-built_in">dict</span>(runner=runner, kw=kw), number=<span class="hljs-number">1</span>))</span><br></pre></div></div><p>Two matrices with a rather large size <code>1200 x 1200</code> are supplied as input, and we test <code>matmul</code> against four settings. The result is listed as below:</p><p class="noindent"></p><table><thead><tr><th align="center">nthreads</th><th align="center">GIL</th><th align="center">time (s)</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">N</td><td align="center">3.47</td></tr><tr><td align="center">1</td><td align="center">Y</td><td align="center">3.51</td></tr><tr><td align="center">2</td><td align="center">N</td><td align="center">3.78</td></tr><tr><td align="center">2</td><td align="center">Y</td><td align="center">6.96</td></tr></tbody></table><p class="noindent">The first two rows show that, with single thread, <code>matmul</code> has comparable performance no matter releasing GIL or not. This is desired behavior, since GIL should not lead to performance degradation in single-threading scene. But things change when it comes to multi-threading. With two computing threads running in parallel, the time doubles if holding GIL, whilst in another setting (GIL released), the performance remains unchanged.</p><p class="noindent"></p><p>We may step further to investigate the behavior of <code>prange</code>. <code>prange</code> is provided by Cython for more convenient parallel computing, adopting the famous OpenMP as backend. Writing a <code>prange</code> version <code>_matmul</code> should take minor modification:</p><div class="gk-code hljs" data-gk-id="BLOCK4"><div class="gk-code-display"><pre><span class="line">cdef void _matmul_p(</span><br><span class="line">    np.float_t[:, :] Av,</span><br><span class="line">    np.float_t[:, :] Bv,</span><br><span class="line">    np.float_t[:, :] Cv,</span><br><span class="line">    <span class="hljs-built_in">int</span> M, <span class="hljs-built_in">int</span> N, <span class="hljs-built_in">int</span> P,</span><br><span class="line">) nogil:</span><br><span class="line">    cdef <span class="hljs-built_in">int</span> i, j, k, ij</span><br><span class="line"></span><br><span class="line">    cdef <span class="hljs-built_in">int</span> MP = M * P</span><br><span class="line">    <span class="hljs-keyword">for</span> ij <span class="hljs-keyword">in</span> prange(MP, schedule=<span class="hljs-string">&#x27;guided&#x27;</span>):</span><br><span class="line">        i = ij // P</span><br><span class="line">        j = ij % P</span><br><span class="line">        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):</span><br><span class="line">            Cv[i, j] += Av[i, k] * Bv[k, j]</span><br></pre></div></div><p class="par">plus the wrapper <code>matmul</code>:</p><div class="gk-code hljs" data-gk-id="BLOCK5"><div class="gk-code-display"><pre><span class="line">cpdef matmul(</span><br><span class="line">    np.ndarray[dtype=np.float_t, ndim=<span class="hljs-number">2</span>] A,</span><br><span class="line">    np.ndarray[dtype=np.float_t, ndim=<span class="hljs-number">2</span>] B,</span><br><span class="line">    <span class="hljs-built_in">object</span> use_gil,</span><br><span class="line">    <span class="hljs-comment"># hl: begin</span></span><br><span class="line">    <span class="hljs-built_in">object</span> parallel,</span><br><span class="line">    <span class="hljs-comment"># hl: end</span></span><br><span class="line">):</span><br><span class="line">    cdef <span class="hljs-built_in">int</span> M = A.shape[<span class="hljs-number">0</span>]</span><br><span class="line">    cdef <span class="hljs-built_in">int</span> N = A.shape[<span class="hljs-number">1</span>]</span><br><span class="line">    cdef <span class="hljs-built_in">int</span> P = B.shape[<span class="hljs-number">1</span>]</span><br><span class="line"></span><br><span class="line">    C = np.zeros((M, P))</span><br><span class="line">    cdef np.float_t[:, :] Av = A, Bv = B, Cv = C</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">if</span> use_gil:</span><br><span class="line">        <span class="hljs-comment"># hl: begin</span></span><br><span class="line">        <span class="hljs-keyword">if</span> parallel:</span><br><span class="line">            _matmul_p(Av, Bv, Cv, M, N, P)</span><br><span class="line">        <span class="hljs-keyword">else</span>:</span><br><span class="line">            _matmul(Av, Bv, Cv, M, N, P)</span><br><span class="line">        <span class="hljs-comment"># hl: end</span></span><br><span class="line">    <span class="hljs-keyword">else</span>:</span><br><span class="line">        <span class="hljs-comment"># hl: begin</span></span><br><span class="line">        <span class="hljs-keyword">if</span> parallel:</span><br><span class="line">            _matmul_p(Av, Bv, Cv, M, N, P)</span><br><span class="line">        <span class="hljs-keyword">else</span>:</span><br><span class="line">            <span class="hljs-keyword">with</span> nogil:</span><br><span class="line">                _matmul(Av, Bv, Cv, M, N, P)</span><br><span class="line">        <span class="hljs-comment">#hl: end</span></span><br><span class="line">    <span class="hljs-keyword">return</span> C</span><br></pre></div></div><p class="par">and also, the benchmark script:</p><div class="gk-code hljs" data-gk-id="BLOCK6"><div class="gk-code-display"><pre><span class="line"><span class="hljs-comment"># hl: begin</span></span><br><span class="line"><span class="hljs-keyword">def</span> <span class="hljs-title function_">runner</span>(<span class="hljs-params">nthreads: <span class="hljs-built_in">int</span>, use_gil: <span class="hljs-built_in">bool</span>, parallel: <span class="hljs-built_in">bool</span></span>) -&gt; <span class="hljs-literal">None</span>:</span><br><span class="line">    args = (A, B, use_gil, parallel)</span><br><span class="line">    <span class="hljs-comment"># hl: end</span></span><br><span class="line">    <span class="hljs-keyword">if</span> nthreads == <span class="hljs-number">0</span>:</span><br><span class="line">        matmul.matmul(*args)</span><br><span class="line">        <span class="hljs-keyword">return</span></span><br><span class="line"></span><br><span class="line">    threads = []</span><br><span class="line">    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(nthreads):</span><br><span class="line">        threads.append(threading.Thread(target=matmul.matmul, args=args))</span><br><span class="line">        threads[-<span class="hljs-number">1</span>].start()</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">for</span> thread <span class="hljs-keyword">in</span> threads:</span><br><span class="line">        thread.join()</span><br></pre></div></div><div class="gk-code hljs" data-gk-id="BLOCK7"><div class="gk-code-display"><pre><span class="line"><span class="hljs-keyword">for</span> kw <span class="hljs-keyword">in</span> make_grid(</span><br><span class="line">        nthreads=[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>],</span><br><span class="line">        use_gil=[<span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>],</span><br><span class="line">        <span class="hljs-comment"># hl: begin</span></span><br><span class="line">        parallel=[<span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>],</span><br><span class="line">        <span class="hljs-comment"># hl: end</span></span><br><span class="line">):</span><br><span class="line">    <span class="hljs-built_in">print</span>(kw)</span><br><span class="line">    <span class="hljs-built_in">print</span>(timeit.timeit(<span class="hljs-string">&quot;runner(**kw)&quot;</span>, <span class="hljs-built_in">globals</span>=<span class="hljs-built_in">dict</span>(runner=runner, kw=kw), number=<span class="hljs-number">1</span>))</span><br></pre></div></div><p class="par">OpenMP requires extra compilation flags, so a <code>.pyxbld</code> file is needed:</p><div class="gk-code hljs" data-gk-id="BLOCK8"><div class="gk-code-display"><pre><span class="line"><span class="hljs-comment"># matmul.pyxbld</span></span><br><span class="line"><span class="hljs-keyword">from</span> setuptools <span class="hljs-keyword">import</span> Extension</span><br><span class="line"><span class="hljs-keyword">from</span> Cython.Build <span class="hljs-keyword">import</span> cythonize</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">def</span> <span class="hljs-title function_">make_ext</span>(<span class="hljs-params">modname, pyxfilename</span>):</span><br><span class="line">    ext = Extension(</span><br><span class="line">        modname,</span><br><span class="line">        [pyxfilename],</span><br><span class="line">        extra_compile_args=[<span class="hljs-string">&#x27;-fopenmp&#x27;</span>],</span><br><span class="line">        extra_link_args=[<span class="hljs-string">&#x27;-fopenmp&#x27;</span>],</span><br><span class="line">    )</span><br><span class="line">    <span class="hljs-keyword">return</span> cythonize(</span><br><span class="line">        [ext],</span><br><span class="line">        language_level=<span class="hljs-number">3</span>,</span><br><span class="line">        annotate=<span class="hljs-literal">True</span>,</span><br><span class="line">    )[<span class="hljs-number">0</span>]</span><br></pre></div></div><p class="noindent"></p><table><thead><tr><th align="center">nthreads</th><th align="center">GIL</th><th align="center">time w/o par. (s)</th><th align="center">time w/ par. (s)</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">N</td><td align="center">3.47</td><td align="center">0.82</td></tr><tr><td align="center">1</td><td align="center">Y</td><td align="center">3.51</td><td align="center">0.89</td></tr><tr><td align="center">2</td><td align="center">N</td><td align="center">3.78</td><td align="center">1.79</td></tr><tr><td align="center">2</td><td align="center">Y</td><td align="center">6.96</td><td align="center">1.81</td></tr></tbody></table><p>We can see that <code>prange</code> brings an amazing boost in performance! <code>_matmul_p</code> is 3~4x faster in single-threading setting. The number might vary across different hardwares, depending on the number of CPU cores. In the setting of two threads, the running time doubles, which indicates that <code>prange</code> <em>does</em> efficiently use up all available CPU resources.</p><p>We can also notice that, whether to release GIL or not seemingly does not affect <code>prange</code> <sup id="fnref:2"><a href="#fn:2">2</a></sup>. The reason is <code>prange</code> requires GIL to be released, which is automatically done by default.</p><p class="noindent"></p><blockquote><p class="noindent">Cython supports native parallelism through the cython.parallel module. To use this kind of parallelism, the GIL must be released (see Releasing the GIL). It currently supports OpenMP, but later on more backends might be supported. – <em><a target="_blank" rel="noopener" href="https://cython.readthedocs.io/en/latest/src/userguide/parallelism.html">Using Parallelism</a></em></p></blockquote><h2 id="conclusion">Conclusion</h2><p><strong>If there’s no need to hold GIL, just release it.</strong> This happens when you are manipulating some C data structures, and not attempting to disturb the interpreter.</p><p class="nomargin"><strong>If there’s massive looping in your Cython code, feel free to accelerate it with <code>prange</code>.</strong> <code>prange</code> will effeciently schedule the computation onto all CPU resources.</p><p class="nomargin"><strong>If there’s some macro tasks <sup id="fnref:3"><a href="#fn:3">3</a></sup> which could not be easily parallelized in Cython, schedule them via <code>threading</code> module.</strong> <code>threading</code> sucks for most of the time, but if the tasks not always acquiring GIL, it should be fine just like threads in other languages.</p><div class="footnotes"><ol><li class="footnote" id="fn:1">so that it behaves just like a single-threading version</li><li class="footnote" id="fn:2">0.82s vs 0.89s</li><li class="footnote" id="fn:3">routines consisting of large pieces of logic</li></ol></div><br><blockquote><p class="cc"><b>Author:</b> hsfzxjy.<br><b>Link:</b> <span class="cc-link"></span>.<br><b>License:</b> <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">CC BY-NC-ND 4.0</a>.<br>All rights reserved by the author.<br>Commercial use of this post in any form is <b>NOT</b> permitted.<br>Non-commercial use of this post should be attributed with this block of text.</p></blockquote><script>!function(){var n=document.querySelector("span.cc-link");n&&(n.innerHTML='<a href="'+location.href+'">'+location.href+"</a>")}()</script></div><div class="post__tags"><a href="/tags/Cython/">Cython</a></div><div class="post-nav"><a href="/cython-auto-reload/" class="pre">«Auto Rebuild .pyx Files with pyximport</a><a href="/obtain-a-random-unused-tcp-port-with-bash/" class="next">Obtain a Random Available TCP Port with Bash»</a></div><div id="disqus_thread"><div id="no-comment"><h2>OOPS!</h2><span>A comment box should be right here...</span><span>But it was gone due to network issues :-(</span><span>If you want to leave comments, make sure you have access to&nbsp;<a target="_blank" rel="noopener" href="https://disqus.com">disqus.com</a>.</span></div><script>var disqus_shortname="hsfzxjy",disqus_identifier="cython-and-threads/",disqus_title="Cython and Threads",disqus_url="https://i.hsfzxjy.site/cython-and-threads/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.defer=!0,e.src="https://"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(e),e.onerror=function(){document.getElementById("no-comment").classList.add("show")}}()</script><script id="dsq-count-scr" src="//hsfzxjy.disqus.com/count.js" async defer></script></div></div></main><section class="aside__group"><span class="aside__btn"><div lang="zh" class="github-btn"><a href="#" rel="noopener noreferrer" target="_blank" class="gh-btn"><span class="gh-ico"></span><span class="gh-text">FOLLOW ME</span></a><a href="#" rel="noopener noreferrer" target="_blank" class="gh-count"></a></div><script>window.GH_BUTTON={username:"hsfzxjy"}</script></span><aside class="aside__left"><div class="aside__menuList"><span class="aside__menuList-item__icon"><i class="icon-home"></i></span><a href="/" class="aside__menuList-item"><span lang="zh" class="font__ui">首页 / Home</span></a><span class="aside__menuList-item__icon current"><i class="icon-embed2"></i></span><a href="/categories/Tech/" class="aside__menuList-item current"><span lang="zh" class="font__ui">科技 / Tech</span></a><span class="aside__menuList-item__icon"><i class="icon-android"></i></span><a href="/categories/Soliloquy/" class="aside__menuList-item"><span lang="zh" class="font__ui">呓语 / Soliloquy</span></a><span class="aside__menuList-item__icon"><i class="icon-leaf"></i></span><a href="/categories/Life/" class="aside__menuList-item"><span lang="zh" class="font__ui">生活 / Life</span></a><span class="aside__menuList-item__icon"><i class="icon-bookmarks"></i></span><a href="/categories/Memo/" class="aside__menuList-item"><span lang="zh" class="font__ui">速记 / Memo</span></a><span class="aside__menuList-item__icon"><i class="icon-books"></i></span><a href="/categories/Series/" class="aside__menuList-item"><span lang="zh" class="font__ui">连载 / Series</span></a><span class="aside__menuList-item__icon"><i class="icon-sigma"></i></span><a href="/works/" class="aside__menuList-item"><span lang="zh" class="font__ui">项目 / Projects</span></a><span class="aside__menuList-item__icon"><i class="icon-earth"></i></span><a href="/links/" class="aside__menuList-item"><span lang="zh" class="font__ui">友链 / Links</span></a><span class="aside__menuList-item__icon"><i class="icon-wink"></i></span><a href="/about/" class="aside__menuList-item"><span lang="zh" class="font__ui">关于 / About</span></a><span class="aside__menuList-item__icon"><i class="icon-history"></i></span><a href="/aggr/" class="aside__menuList-item"><span lang="zh" class="font__ui">索引 / Index</span></a><span class="aside__menuList-item__icon"><i class="icon-rss2"></i></span><a href="/rss.xml" class="aside__menuList-item"><span lang="zh" class="font__ui">订阅 / RSS</span></a></div></aside><aside class="aside__right"><div id="toc" lang="en" class="font__body"><div class="toc-toggler"></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#conclusion"><span class="toc-number">1.</span> <span class="toc-text">Conclusion</span></a></li></ol></div></div></aside></section><div id="footer" style="text-align:center" lang="zh" class="font__ui">© <a href="/" rel="nofollow">hsfzxjy 的博客.</a>&nbsp;Powered by&nbsp;<a rel="nofollow" target="_blank" href="https://hexo.io">Hexo.</a>&nbsp;<a rel="nofollow" target="_blank" href="https://github.com/hsfzxjy/byak-hexo">Theme</a>&nbsp;by&nbsp;<a rel="nofollow" target="_blank" href="https://github.com/hsfzxjy">hsfzxjy</a>.<div style="margin-top:10px"><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011202001249" style="display:inline-block;text-decoration:none;height:20px;line-height:20px"><img src="/img/beian.png" style="float:left" loading="lazy"><span style="float:left;height:20px;line-height:20px;margin:0 0 0 5px;color:#939393">粤公网安备44011202001249号</span></a><a target="_blank" style="display:inline-block;text-decoration:none;height:20px;line-height:20px" href="http://beian.miit.gov.cn/"><span style="float:left;height:20px;line-height:20px;margin:0 0 0 5px;color:#939393">粤ICP备2020075702号-1</span></a></div></div></body><script src="/dist/js/main.js" async defer></script></html>