<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=5" name="viewport"><meta content="yes" name="mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><script>(()=>{let r="/cnfonts.js",n=document,e=n.createElement("link");e.rel="stylesheet",e.href="/fontchan/jBKCaHQX.css",e.blocking="render",e.onerror=()=>{var e=n.createElement("script");e.src=r,e.onload=()=>$fontchan.injectCss(),n.head.appendChild(e)},n.head.appendChild(e),"serviceWorker"in navigator&&navigator.serviceWorker.register(r,{scope:"/"}).then(e=>e.update())})()</script><title>Modern Cryptography, GPG and Integration with Git(hub)</title><meta itemprop="title" content="Modern Cryptography, GPG and Integration with Git(hub) - hsfzxjy 的博客"><meta itemprop="og:title" content="Modern Cryptography, GPG and Integration with Git(hub) - hsfzxjy 的博客"><meta itemprop="image" content="https://i.hsfzxjy.site/avatar-for-hsfzxjy.jpg"><meta itemprop="og:image" content="https://i.hsfzxjy.site/avatar-for-hsfzxjy.jpg"><meta itemprop="description" content="GPG (the GNU Privacy Guard) is a complete and free implem..."><meta itemprop="og:type" content="website"><link rel="stylesheet" href="/dist/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="alternate" type="application/rss+xml" href="/rss.xml"></head><body><nav class="nav"><span class="nav__toggler"><span class="nav__toggler-bar bar1"></span><span class="nav__toggler-bar bar2"></span><span class="nav__toggler-bar bar3"></span></span><span class="nav__core"><div class="nav__logo"><img src="/avatar.webp" loading="lazy"></div><a href="/" lang="zh" class="nav__brand">hsfzxjy</a></span><span class="nav__togglerClose"><span class="nav__togglerClose-circle"></span><span class="nav__togglerClose-bar bar1"></span><span class="nav__togglerClose-bar bar2"></span></span><div class="nav__pathIndicator"><a href="/categories/Tech/">Tech</a></div></nav><main class="mainContainer"><div lang="en" class="post post-page"><h1 lang="en" class="post__title">Modern Cryptography, GPG and Integration with Git(hub)</h1><div class="post__meta font__ui">2023-01-03 | <span class="post__meta-categories"><a href="/categories/Tech/">Tech</a></span></div><div class="post__content font__body"><p><a target="_blank" rel="noopener" href="https://gnupg.org/">GPG</a> (the GNU Privacy Guard) is a complete and free implementation of the <a target="_blank" rel="noopener" href="https://www.openpgp.org/">OpenPGP</a> standard. Based on various mature algorithms to select from, GPG acts as a convenient tool for daily cryptographic communication.</p><p>GPG has two primary functionalities: (1) it encrypts and signs your data for secure transfering and verifiable information integrity, and (2) it features a versatile key management system to construct and promote web of trust. GPG also has a well-designed command line interface for easy integration with other applications such as git.</p><p>This article is going to briefly elaborate some key concepts and usage of GPG, and then present demonstration to cryptographically sign git commits with the help of GPG.</p><h1 id="modern-cryptography-101">Modern Cryptography 101</h1><p>To understand how GPG or other privacy tools work, I should first introduce some basic ideas of modern cryptography. Let’s start with the two primary problems of secure communication, which includes <em>data encryption</em> and <em>data integrity/authenticity verification</em>.</p><h2 id="data-encryption">Data Encryption</h2><p>Peer-to-peer data encryption aims to prevent the message from being spied by a potential third party, especially when the two parties are communicating over a channel open to the public. Imagine Alice and Bob are mailing through pigeons, with the message unencrypted and clearly written on the paper. It is possible for a third person called Blake to intercept the pigeon, open the attached mailbox and read the message in it, without Alice and Bob knowing his existence.</p><p>Data encryption is introduced to defend against such attacks. For secure data exchange, Alice and Bob should agree on some kind of invertible message processing pipeline. The sender preprocesses (encrypts) the message before it attached to the pigeon, and the recipient performs the inverted process (decrypts) to read the clear message. In terms of cryptography, such pipeline is called a cryptographic algorithm or a <em>cipher</em>.</p><p>A cipher usually works with a key (or several keys). With the cipher fixed, the message encrypted with one key should only be decrypted with the same one. Modern ciphers are carefully designed to satisfy that Blake is hard to perform decryption without the key, even if he knows the full detail of the cipher. Under this assurance, Alice and Bob only have to choose a specific algorithm as cipher from the public list, and agree on the key before communication. This simplifies the process of negotiation, as they don’t have to discuss the sophisticated implementation of the cipher.</p><p>The currently available ciphers can be roughly categorized into two families, the <em>symmetric ciphers</em> and the <em>public-key ciphers</em>.</p><h2 id="symmetric-ciphers">Symmetric Ciphers</h2><p>Symmetric ciphers encrypt and decrypt messages using the same key. They went back far into human history. You might have heard of the <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Caesar_cipher">Caesar cipher</a> that replaces each plaintext letter with a different one a fixed number of places down the alphabet, which is a famous example of this category. For Caesar cipher, the key is the number of positions being shifted, like <code>3</code> for a tranformation of <code>A-&gt;D, B-&gt;E</code>.</p><p><img loading="lazy" src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Caesar_cipher_left_shift_of_3.svg/330px-Caesar_cipher_left_shift_of_3.svg.png" alt=""></p><p>Symmetric cipher exposes several drawbacks in realistic usage. First, it provides no defense against the scenario of the key being stolen. If Blake somehow knows the key, he can both spy and forge the messages sent between Alice and Bob. Also, it would require $n(n-1)/2$ keys to achieve pairwise communication among $n$ persons, increasing the expense of key exchange and opportunity of leakage.</p><h2 id="public-key-ciphers">Public-key Ciphers</h2><p>By contrast, the public-key ciphers mitigate the problems by adopting a pair of keys instead of just one. A message encrypted by one key might only be decrypted with the other, and <em>vice versa</em>.</p><p>Practically we name one of them as <em>public key</em> and the other as <em>secret key</em>. The public key is published to whom we want to communicate with, while the secret key is kept locally and must only be known to ourselves. When Alice sends a message to Bob, the message is encrypted with Bob’s public key, and Bob uses his own private key to decrypt it on receiving.</p><p>Public-key ciphers reduce the adverse impact of public key leakage. An attacker with Alice’s public key in hand is unable to decrypt messages sent by others to her. Also, only $n$ keys have to be exchanged for $n$-person pairwise communication. The advantages overall result in lower key exchanging expense and inclined popularity of public-key ciphers in real life.</p><h2 id="digital-signatures-for-data-integrity">Digital Signatures for Data Integrity</h2><p>Ciphers solve the problem of data encryption, preventing the messages transfered from being spied by a third party, albeit they do not guarantee the integrity and authenticity of the data. Bob cannot tell whether the message he received is truly sent by Alice, since his public key is known by the world. Towards this purpose, the concept of <em>digital signatures</em> must be introduced.</p><p>Digital signatures employs the idea of hashing. In cryptography, hashing is a technique to generate digest for a piece of message. The digest must be almost unique, that is, two different messages should ideally have unequal value of digests. Also, it should guarantee that <em>no one</em> would recover the original plaintext from the digest <sup id="fnref:1"><a href="#fn:1">1</a></sup>.</p><p>Practically, Alice the sender would attach an encrypted digest as digital signature along with the message, by first applying a hash function and then encrypt with <em>Alice’s</em> own private key on the message. Anyone can decrypt the signature with Alice’s public key to verify that the message is truly signed by Alice and sent as-is. Since no one else knows Alice’s private key, the signature cannot be forged and hence is a mighty tool to assure authenticity.</p><h1 id="gpg">GPG</h1><p>The ciphers and digital signatures form the foundation of modern cryptography, upon which OpenPGP is proposed and GPG built as a high-level structure for convenient daily usage. This post will not explain the full details of GPG, but its basic idea and some of the frequently-used operations as tutorial.</p><p>Compared with the basic public-key system, OpenPGP further adopts a more sophisticated design. OpenPGP adopts a concept “user” to distinguish identities. A user is uniquely identified by his <em>real name</em> and <em>email</em>, and could own a primary key pair plus an optional collection of sub key pairs, each key pair with potentially different capabilities such as encryption or signing. The separation of keys’ responsibility enables one to revoke compromised keys without interfering the validity of others, leading to more flexible key management.</p><h2 id="key-generation">Key Generation</h2><p>To create a user and generate the key pair, we can use the <code>gpg --generate-key</code> command</p><div class="gk-code hljs" data-gk-id="BLOCK1"><div class="gk-code-display"><pre><span class="line">$ gpg --generate-key</span><br><span class="line">gpg (GnuPG) 2.2.19; Copyright (C) 2019 Free Software Foundation, Inc.</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law.</span><br><span class="line"></span><br><span class="line">Note: Use &quot;gpg --full-generate-key&quot; for a full featured key generation dialog.</span><br><span class="line"></span><br><span class="line">GnuPG needs to construct a user ID to identify your key.</span><br><span class="line"></span><br><span class="line">Real name: FooBar</span><br><span class="line">Email address: foobar@foobar</span><br><span class="line">You selected this USER-ID:</span><br><span class="line">    &quot;FooBar &lt;foobar@foobar&gt;&quot;</span><br><span class="line"></span><br><span class="line">Change (N)ame, (E)mail, or (O)kay/(Q)uit? O</span><br><span class="line">We need to generate a lot of random bytes. It is a good idea to perform</span><br><span class="line">some other action (type on the keyboard, move the mouse, utilize the</span><br><span class="line">disks) during the prime generation; this gives the random number</span><br><span class="line">generator a better chance to gain enough entropy.</span><br><span class="line">gpg: key 417706EE02BA78E3 marked as ultimately trusted</span><br><span class="line">gpg: revocation certificate stored as &#x27;/home/hsfzxjy/.gnupg/openpgp-revocs.d/A100A3E7D94F665A2CB5A34D417706EE02BA78E3.rev&#x27;</span><br><span class="line">public and secret key created and signed.</span><br><span class="line"></span><br><span class="line">pub   rsa3072 2023-01-10 [SC] [expires: 2025-01-09]</span><br><span class="line">      A100A3E7D94F665A2CB5A34D417706EE02BA78E3</span><br><span class="line">uid                      FooBar &lt;foobar@foobar&gt;</span><br><span class="line">sub   rsa3072 2023-01-10 [E] [expires: 2025-01-09]</span><br></pre></div></div><p class="par">In this example, we’ve created a user with real name being <code>FooBar</code> and the email <code>foobar@foobar</code>. During the process, the program will prompt a dialog inquiring to enter a passphrase, which acts as the main guardian to access your secret key.</p><p>By default GPG generates two keys with different capabilities. The primary key prefixed with <code>pub</code> is for signing (<code>S</code>) and certifying (<code>C</code>), and a sub key prefixed with <code>sub</code> for encrypting (<code>E</code>). With <code>gpg --list-key</code> and <code>gpg --edit-key</code> commands, we can inspect the keys stored in our local database and edit one or more of them.</p><h2 id="basic-document-signing">Basic Document Signing</h2><p>When posting a document to the public, one would like to claim his issuance and expects no one could tamper the content, which can be achieved by digitally signing the document. Let’s check an example</p><div class="gk-code hljs" data-gk-id="BLOCK2"><div class="gk-code-display"><pre><span class="line">$ echo &quot;hello world&quot; &gt; doc</span><br><span class="line">$ gpg --sign -u FooBar doc</span><br><span class="line">$ cat doc.gpg</span><br><span class="line">-- some binary data --</span><br></pre></div></div><p class="par">Here we create a file named <code>doc</code> with a string <code>&quot;hello world&quot;</code> as the content. <code>gpg --sign -u FooBar</code> signs and encrypts the given document with user <code>FooBar</code>‘s secret key, with the bundled result written to a new file <code>doc.gpg</code>. A person knowing <code>FooBar</code>‘s public key could verify its integrity with <code>--verify</code></p><div class="gk-code hljs" data-gk-id="BLOCK3"><div class="gk-code-display"><pre><span class="line">$ gpg --verify doc.gpg</span><br><span class="line">gpg: Signature made Tue 10 Jan 2023 09:02:03 PM CST</span><br><span class="line">gpg:                using RSA key A100A3E7D94F665A2CB5A34D417706EE02BA78E3</span><br><span class="line">gpg:                issuer &quot;foobar@foobar&quot;</span><br><span class="line">gpg: Good signature from &quot;FooBar &lt;foobar@foobar&gt;&quot; [ultimate]</span><br></pre></div></div><p class="par">or directly decrypt it with <code>--decrypt</code></p><div class="gk-code hljs" data-gk-id="BLOCK4"><div class="gk-code-display"><pre><span class="line">$ gpg --decrypt doc.gpg</span><br><span class="line">hello world</span><br><span class="line">gpg: Signature made Tue 10 Jan 2023 09:02:03 PM CST</span><br><span class="line">gpg:                using RSA key A100A3E7D94F665A2CB5A34D417706EE02BA78E3</span><br><span class="line">gpg:                issuer &quot;foobar@foobar&quot;</span><br><span class="line">gpg: Good signature from &quot;FooBar &lt;foobar@foobar&gt;&quot; [ultimate]</span><br></pre></div></div><p class="par">If the content of <code>doc.gpg</code> be tampered, either of the above operations will fail.</p><p>GPG provides several flags to customize the generation of digital signature. For instance, flag <code>--clearsign</code> forces the signature to be separately attached after the plain text, which is more convenient for scenario like sending via e-mail</p><div class="gk-code hljs" data-gk-id="BLOCK5"><div class="gk-code-display"><pre><span class="line">$ gpg --clearsign -u FooBar -o- doc</span><br><span class="line">-----BEGIN PGP SIGNED MESSAGE-----</span><br><span class="line">Hash: SHA512</span><br><span class="line"></span><br><span class="line">hello world</span><br><span class="line">-----BEGIN PGP SIGNATURE-----</span><br><span class="line"></span><br><span class="line">iQHBBAEBCgAsFiEEoQCj59lPZlostaNNQXcG7gK6eOMFAmO9cJMOHGZvb2JhckBm</span><br><span class="line">b29iYXIACgkQQXcG7gK6eONlJAv2NULQR9aPfVfLj6rpKcRxvKDna2vnHhVg2Pyj</span><br><span class="line">I12lJfsF6kA4wMCkuJ5Kzk2OOLAPFHAh+Y5zYnx825vP7ckHBvhYfwfkKmE7wpqN</span><br><span class="line">ptX/ij0TDtp71Nq/oabBOMG1jYop0AwfCd3c5X27UyCGz6V5mdm3Dea4hILsQHld</span><br><span class="line">OsTLz7B6y8FmA4kT5mHOreVMI1cd3NPKKugSS0bSmSv/DN/Znlb72pbD0Hq0iLi/</span><br><span class="line">8LJAEuj2eEnUH5NyS1tY2GHBBUttMMGhgrNAxrBr445+ZGpczUJVYVzS1tdTWwSZ</span><br><span class="line">uzHrD0CWtiIcFe6Au/pzDmbq+EJ9fF7YECCfc0m/QANGUNJydXs18c7IfrT9Awze</span><br><span class="line">UJwYNKxGkXipVfGJECJZ4IvDiGiWDHv/QCZ+Bc0d6ZIu5nUcm4pC3q4RFm7jn/s9</span><br><span class="line">OnDiXaOgHjGiOKOR/Auofzr8gerq0uFFYcbiWots8hjLOlITO2iGMF3jzZk8ncdU</span><br><span class="line">QeT4711EQ4jzoy/5vfOCU7YuKh4=</span><br><span class="line">=gdHf</span><br><span class="line">-----END PGP SIGNATURE-----</span><br></pre></div></div><p class="par">With <code>-o&lt;filename&gt;</code> the output will be directed to <code>&lt;filename&gt;</code> instead of the default file name <code>doc.gpg</code>.</p><h2 id="document-encryption-and-trust-of-web">Document Encryption and Trust of Web</h2><p>Document signed using above method could be read by a wide audience, as long as they have user <code>FooBar</code>‘s public key. For a more limited usage where the document should be seen by specific recipient, say user <code>BazBaz</code>, we should encrypt it with <code>BazBaz</code>‘s public key.</p><p>The command <code>gpg --export -u BazBaz &gt; bazbaz.gpg</code> will dump all public keys of user <code>BazBaz</code> to file <code>bazbaz.gpg</code>, which can be distributed and imported by other users across the web. As an example, user <code>FooBar</code> imports the file to his local database</p><div class="gk-code hljs" data-gk-id="BLOCK6"><div class="gk-code-display"><pre><span class="line">(foobar) $ gpg --import bazbaz.gpg</span><br><span class="line">gpg: key 90D332C875527240: public key &quot;BazBaz &lt;bazbaz@bazbaz&gt;&quot; imported</span><br><span class="line">gpg: Total number processed: 2</span><br><span class="line">gpg:               imported: 2</span><br><span class="line">gpg:            new subkeys: 1</span><br><span class="line">gpg:         new signatures: 1</span><br><span class="line">(foobar) $ gpg --list-key</span><br><span class="line">pub   rsa3072 2023-01-10 [SC] [expires: 2025-01-09]</span><br><span class="line">      A100A3E7D94F665A2CB5A34D417706EE02BA78E3</span><br><span class="line">uid           [ultimate] FooBar &lt;foobar@foobar&gt;</span><br><span class="line">sub   rsa3072 2023-01-10 [E] [expires: 2025-01-09]</span><br><span class="line"></span><br><span class="line">pub   rsa3072 2023-01-10 [SC]</span><br><span class="line">      EE0B65758BBA776A2D0521B290D332C875527240</span><br><span class="line">uid           [ unknown] BazBaz &lt;bazbaz@bazbaz&gt;</span><br><span class="line">sub   rsa3072 2023-01-10 [E]</span><br></pre></div></div><p class="par">As we can see, the public key of <code>BazBaz</code> now shows up in the local list, but somehow the uid is labeled as <code>[unknown]</code> instead of <code>[ultimate]</code> as <code>FooBar</code> does.</p><p>The label <code>[unknown]</code> indicates that GPG will distrust any newly imported keys by default. OpenPGP comes with a multi-level trust model in defense against someone pretending as others’ identity, with <code>[unknown]</code> being the least trusted level. GPG will prompt us if we attempt to encrypt with an <code>[unknown]</code> key</p><div class="gk-code hljs" data-gk-id="BLOCK7"><div class="gk-code-display"><pre><span class="line">(foobar) $ gpg --sign --encrypt -u foobar --recipient bazbaz doc</span><br><span class="line">gpg: 9F85CD170E8B1269: There is no assurance this key belongs to the named user</span><br><span class="line"></span><br><span class="line">sub  rsa3072/9F85CD170E8B1269 2023-01-10 BazBaz &lt;bazbaz@bazbaz&gt;</span><br><span class="line"> Primary key fingerprint: EE0B 6575 8BBA 776A 2D05  21B2 90D3 32C8 7552 7240</span><br><span class="line">      Subkey fingerprint: 7E53 135B C569 F125 63D1  BEF2 9F85 CD17 0E8B 1269</span><br><span class="line"></span><br><span class="line">It is NOT certain that the key belongs to the person named</span><br><span class="line">in the user ID.  If you *really* know what you are doing,</span><br><span class="line">you may answer the next question with yes.</span><br><span class="line"></span><br><span class="line">Use this key anyway? (y/N)</span><br></pre></div></div><p class="par">This mechanism protects us from accidentally sending secret information to forged identity.</p><p>To tell GPG that the identity is really trusted, we can sign the public key to increase its trust level. <strong>Remember this must be done after you actually verify the identity via direct contact to that person.</strong> The <code>--sign-key</code> flag is used for this purpose</p><div class="gk-code hljs" data-gk-id="BLOCK8"><div class="gk-code-display"><pre><span class="line">(foobar) $ gpg -u foobar --sign-key bazbaz</span><br><span class="line">pub  rsa3072/90D332C875527240</span><br><span class="line">     created: 2023-01-10  expires: never       usage: SC</span><br><span class="line">     trust: unknown       validity: unknown</span><br><span class="line">sub  rsa3072/9F85CD170E8B1269</span><br><span class="line">     created: 2023-01-10  expires: never       usage: E</span><br><span class="line">[ unknown] (1). BazBaz &lt;bazbaz@bazbaz&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pub  rsa3072/90D332C875527240</span><br><span class="line">     created: 2023-01-10  expires: never       usage: SC</span><br><span class="line">     trust: unknown       validity: unknown</span><br><span class="line"> Primary key fingerprint: EE0B 6575 8BBA 776A 2D05  21B2 90D3 32C8 7552 7240</span><br><span class="line"></span><br><span class="line">     BazBaz &lt;bazbaz@bazbaz&gt;</span><br><span class="line"></span><br><span class="line">Are you sure that you want to sign this key with your</span><br><span class="line">key &quot;FooBar &lt;foobar@foobar&gt;&quot; (417706EE02BA78E3)</span><br><span class="line"></span><br><span class="line">Really sign? (y/N) y</span><br><span class="line">(foobar) $ gpg --list-key</span><br><span class="line">-- omit --</span><br><span class="line">pub   rsa3072 2023-01-10 [SC]</span><br><span class="line">      EE0B65758BBA776A2D0521B290D332C875527240</span><br><span class="line">uid           [  full  ] BazBaz &lt;bazbaz@bazbaz&gt;</span><br><span class="line">sub   rsa3072 2023-01-10 [E]</span><br></pre></div></div><p class="par">Now check the list again, we can see that the trust level of <code>BazBaz</code>‘s key changes from <code>[unknown]</code> into <code>[full]</code>.</p><p>OpenPGP’s trust model allows trust to propagate over the web, which eases the overhead of acknowledging key identities. In short, if user <code>A</code> trusts user <code>B</code>‘s identity, and user <code>B</code> has signed the public key of user <code>C</code>, then user <code>A</code> will transitively trust user <code>C</code>‘s identity. User <code>A</code> by this way has no need to individually verify the identity of all the imported keys and therefore enjoys an easier key management scheme.</p><h1 id="gpg-and-gitgithub-integration">GPG and Git/Github Integration</h1><p>GPG can be employed to claim the authenticity of your code by digitally signing your Git commits. Since Git itself uses email to distinguish authors, it’s possible to commit as other people’s identity. A <a target="_blank" rel="noopener" href="http://www.jayhuang.org/blog/pushing-code-to-github-as-linus-torvalds/">story</a> described how one could push code to Github as the identity of Linus Torvalds. Such vulnerability can be exploited to disseminate malicious code or falsy information over the internet.</p><h2 id="integrate-gpg-with-git">Integrate GPG with Git</h2><p>The <a target="_blank" rel="noopener" href="https://docs.github.com/en/authentication/managing-commit-signature-verification">Github Docs</a> has a series of posts as the guideline to commit signing and Github interoperation. To start with, we should tell Git about our signing key:</p><div class="gk-code hljs" data-gk-id="BLOCK9"><div class="gk-code-display"><pre><span class="line">$ gpg --list-secret-keys --keyid-format long</span><br><span class="line">sec   rsa3072/417706EE02BA78E3 2023-01-10 [SC] [expires: 2025-01-09]</span><br><span class="line">      A100A3E7D94F665A2CB5A34D417706EE02BA78E3</span><br><span class="line">uid                 [ultimate] FooBar &lt;foobar@foobar&gt;</span><br><span class="line">ssb   rsa3072/25E8CB9C4F68EE16 2023-01-10 [E] [expires: 2025-01-09]</span><br><span class="line">$ git config --global gpg.signingkey 417706EE02BA78E3!</span><br></pre></div></div><p class="par">With the <code>!</code> suffix the key precedes others and would always be used. We can alternatively configure to sign commits by default</p><div class="gk-code hljs" data-gk-id="BLOCK10"><div class="gk-code-display"><pre><span class="line">$ git config --global commit.gpgsign true</span><br></pre></div></div><p class="par">As demonstration, let’s switch to the workspace of a git repository and commit the code as usually did</p><div class="gk-code hljs" data-gk-id="BLOCK11"><div class="gk-code-display"><pre><span class="line">$ git add . &amp;&amp; git commit -m &#x27;signed commit&#x27;</span><br></pre></div></div><p class="par">Afterwards, we can inspect the history and see a digital signature attached</p><div class="gk-code hljs" data-gk-id="BLOCK12"><div class="gk-code-display"><pre><span class="line">$ git show --show-signature HEAD</span><br><span class="line">commit 57ac1c20094d0248a4a3e8676050f53f547a6afa (HEAD -&gt; hexo)</span><br><span class="line">gpg: Signature made Wed 11 Jan 2023 04:37:14 PM CST</span><br><span class="line">gpg:                using RSA key A100A3E7D94F665A2CB5A34D417706EE02BA78E3</span><br><span class="line">gpg: Good signature from &quot;FooBar &lt;foobar@foobar&gt;&quot; [ultimate]</span><br><span class="line">Author: hsfzxjy &lt;hsfzxjy@gmail.com&gt;</span><br><span class="line">Date:   Wed Jan 11 16:37:14 2023 +0800</span><br><span class="line"></span><br><span class="line">    signed commit</span><br><span class="line">-- omit --</span><br></pre></div></div><p class="par">which indicates the commit has been signed with success.</p><h2 id="integrate-gpg-with-github">Integrate GPG with Github</h2><p>GPG-signed commits can be highlighted with a <code>Verified</code> label displayed aside on Github, as showcased in the image below,</p><p class="par"><img loading="lazy" src="https://docs.github.com/assets/cb-4827/images/help/commits/gpg-signed-commit-verified-without-details.png" alt=""></p><p class="par">from which other people would know and trust the authenticity of this commit. Towards this effect, one should associate his GPG keys with Github profile. As instructed in <a target="_blank" rel="noopener" href="https://docs.github.com/en/authentication/managing-commit-signature-verification/adding-a-gpg-key-to-your-github-account#adding-a-gpg-key">“Adding a GPG Key”</a>, the GPG public key is firstly exported from the command line in the text-form as</p><div class="gk-code hljs" data-gk-id="BLOCK13"><div class="gk-code-display"><pre><span class="line">$ gpg --armor --export foobar</span><br><span class="line">-----BEGIN PGP PUBLIC KEY BLOCK-----</span><br><span class="line"># GPG public key exported</span><br><span class="line">-----END PGP PUBLIC KEY BLOCK-----</span><br></pre></div></div><p class="par">which should be copied to the clipboard with the separators included. Then in the upper-right corner of any page on Github, click the profile avatar and select <code>Settings -&gt; Access -&gt; SSH and GPG keys -&gt; New GPG key</code>, paste the previously copied content into the box, and confirm with the <code>Add GPG Key</code> button, we should finish the association.</p><h1 id="conclusion-3">Conclusion</h1><p>GPG is a convenient software to do cryptography jobs and perform key management. While its history went back into old days and the UX might look wierd, it still stands as one of the de-facto standards in modern world. This article extensively explains the fundamental idea of modern cryptography on which GPG is based, followed with the demonstration of some GPG every-day usages, and further the instruction to integrate it with external tools/services such as Git or Github. Hopefully it will enlighten you about the approaches to carry out secure message exchange in daily life.</p><div class="footnotes"><ol><li class="footnote" id="fn:1">Even the performer of hashing cannot! This is how hashing differs from encryption.</li></ol></div><br><blockquote><p class="cc"><b>Author:</b> hsfzxjy.<br><b>Link:</b> <span class="cc-link"></span>.<br><b>License:</b> <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">CC BY-NC-ND 4.0</a>.<br>All rights reserved by the author.<br>Commercial use of this post in any form is <b>NOT</b> permitted.<br>Non-commercial use of this post should be attributed with this block of text.</p></blockquote><script>!function(){var n=document.querySelector("span.cc-link");n&&(n.innerHTML='<a href="'+location.href+'">'+location.href+"</a>")}()</script></div><div class="post__tags"><a href="/tags/Git/">Git</a><a href="/tags/Github/">Github</a><a href="/tags/GPG/">GPG</a></div><div class="post-nav"><a href="/diving-from-the-cuda-error-804-into-a-bug-of-libnvidia-container/" class="pre">«Diving from the CUDA Error 804 into a bug of libnvidia-container</a><a href="/move-ubuntu-root-partition/" class="next">Move the Root Partition of Ubuntu»</a></div><div id="disqus_thread"><div id="no-comment"><h2>OOPS!</h2><span>A comment box should be right here...</span><span>But it was gone due to network issues :-(</span><span>If you want to leave comments, make sure you have access to&nbsp;<a target="_blank" rel="noopener" href="https://disqus.com">disqus.com</a>.</span></div><script>var disqus_shortname="hsfzxjy",disqus_identifier="gpg-and-github-interoperation/",disqus_title="Modern Cryptography, GPG and Integration with Git(hub)",disqus_url="https://i.hsfzxjy.site/gpg-and-github-interoperation/";!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.defer=!0,t.src="https://"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(t),t.onerror=function(){document.getElementById("no-comment").classList.add("show")}}()</script><script id="dsq-count-scr" src="//hsfzxjy.disqus.com/count.js" async defer></script></div></div></main><section class="aside__group"><span class="aside__btn"><div lang="zh" class="github-btn"><a href="#" rel="noopener noreferrer" target="_blank" class="gh-btn"><span class="gh-ico"></span><span class="gh-text">FOLLOW ME</span></a><a href="#" rel="noopener noreferrer" target="_blank" class="gh-count"></a></div><script>window.GH_BUTTON={username:"hsfzxjy"}</script></span><aside class="aside__left"><div class="aside__menuList"><span class="aside__menuList-item__icon"><i class="icon-home"></i></span><a href="/" class="aside__menuList-item"><span lang="zh" class="font__ui">首页 / Home</span></a><span class="aside__menuList-item__icon current"><i class="icon-embed2"></i></span><a href="/categories/Tech/" class="aside__menuList-item current"><span lang="zh" class="font__ui">科技 / Tech</span></a><span class="aside__menuList-item__icon"><i class="icon-android"></i></span><a href="/categories/Soliloquy/" class="aside__menuList-item"><span lang="zh" class="font__ui">呓语 / Soliloquy</span></a><span class="aside__menuList-item__icon"><i class="icon-leaf"></i></span><a href="/categories/Life/" class="aside__menuList-item"><span lang="zh" class="font__ui">生活 / Life</span></a><span class="aside__menuList-item__icon"><i class="icon-bookmarks"></i></span><a href="/categories/Memo/" class="aside__menuList-item"><span lang="zh" class="font__ui">速记 / Memo</span></a><span class="aside__menuList-item__icon"><i class="icon-books"></i></span><a href="/categories/Series/" class="aside__menuList-item"><span lang="zh" class="font__ui">连载 / Series</span></a><span class="aside__menuList-item__icon"><i class="icon-sigma"></i></span><a href="/works/" class="aside__menuList-item"><span lang="zh" class="font__ui">项目 / Projects</span></a><span class="aside__menuList-item__icon"><i class="icon-earth"></i></span><a href="/links/" class="aside__menuList-item"><span lang="zh" class="font__ui">友链 / Links</span></a><span class="aside__menuList-item__icon"><i class="icon-wink"></i></span><a href="/about/" class="aside__menuList-item"><span lang="zh" class="font__ui">关于 / About</span></a><span class="aside__menuList-item__icon"><i class="icon-history"></i></span><a href="/aggr/" class="aside__menuList-item"><span lang="zh" class="font__ui">索引 / Index</span></a><span class="aside__menuList-item__icon"><i class="icon-rss2"></i></span><a href="/rss.xml" class="aside__menuList-item"><span lang="zh" class="font__ui">订阅 / RSS</span></a></div></aside><aside class="aside__right"><div id="toc" lang="en" class="font__body"><div class="toc-toggler"></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#modern-cryptography-101"><span class="toc-number">1.</span> <span class="toc-text">Modern Cryptography 101</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#data-encryption"><span class="toc-number">1.1.</span> <span class="toc-text">Data Encryption</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#symmetric-ciphers"><span class="toc-number">1.2.</span> <span class="toc-text">Symmetric Ciphers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#public-key-ciphers"><span class="toc-number">1.3.</span> <span class="toc-text">Public-key Ciphers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#digital-signatures-for-data-integrity"><span class="toc-number">1.4.</span> <span class="toc-text">Digital Signatures for Data Integrity</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#gpg"><span class="toc-number">2.</span> <span class="toc-text">GPG</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#key-generation"><span class="toc-number">2.1.</span> <span class="toc-text">Key Generation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#basic-document-signing"><span class="toc-number">2.2.</span> <span class="toc-text">Basic Document Signing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#document-encryption-and-trust-of-web"><span class="toc-number">2.3.</span> <span class="toc-text">Document Encryption and Trust of Web</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#gpg-and-gitgithub-integration"><span class="toc-number">3.</span> <span class="toc-text">GPG and Git&#x2F;Github Integration</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#integrate-gpg-with-git"><span class="toc-number">3.1.</span> <span class="toc-text">Integrate GPG with Git</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#integrate-gpg-with-github"><span class="toc-number">3.2.</span> <span class="toc-text">Integrate GPG with Github</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#conclusion-3"><span class="toc-number">4.</span> <span class="toc-text">Conclusion</span></a></li></ol></div></div></aside></section><div id="footer" style="text-align:center" lang="zh" class="font__ui">© <a href="/" rel="nofollow">hsfzxjy 的博客.</a>&nbsp;Powered by&nbsp;<a rel="nofollow" target="_blank" href="https://hexo.io">Hexo.</a>&nbsp;<a rel="nofollow" target="_blank" href="https://github.com/hsfzxjy/byak-hexo">Theme</a>&nbsp;by&nbsp;<a rel="nofollow" target="_blank" href="https://github.com/hsfzxjy">hsfzxjy</a>.<div style="margin-top:10px"><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011202001249" style="display:inline-block;text-decoration:none;height:20px;line-height:20px"><img src="/img/beian.png" style="float:left" loading="lazy"><span style="float:left;height:20px;line-height:20px;margin:0 0 0 5px;color:#939393">粤公网安备44011202001249号</span></a><a target="_blank" style="display:inline-block;text-decoration:none;height:20px;line-height:20px" href="http://beian.miit.gov.cn/"><span style="float:left;height:20px;line-height:20px;margin:0 0 0 5px;color:#939393">粤ICP备2020075702号-1</span></a></div></div></body><script src="/dist/js/main.js" async defer></script></html>