<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=5" name="viewport"><meta content="yes" name="mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><title>hsfzxjy 的博客</title><meta itemprop="title" content="hsfzxjy 的博客"><meta itemprop="og:title" content="hsfzxjy 的博客"><meta itemprop="image" content="https://i.hsfzxjy.site/avatar-for-hsfzxjy.jpg"><meta itemprop="og:image" content="https://i.hsfzxjy.site/avatar-for-hsfzxjy.jpg"><meta itemprop="og:type" content="website"><link rel="stylesheet" href="/dist/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="alternate" type="application/rss+xml" href="/rss.xml"></head><body><nav class="nav"><span class="nav__toggler"><span class="nav__toggler-bar bar1"></span><span class="nav__toggler-bar bar2"></span><span class="nav__toggler-bar bar3"></span></span><span class="nav__core"><div class="nav__logo"><img src="/avatar.webp" loading="lazy"></div><a href="/" lang="zh" class="nav__brand">hsfzxjy</a></span><span class="nav__togglerClose"><span class="nav__togglerClose-circle"></span><span class="nav__togglerClose-bar bar1"></span><span class="nav__togglerClose-bar bar2"></span></span><div class="nav__pathIndicator"><a href="/">Home</a></div></nav><main class="mainContainer"><div class="post-list"><article lang="en" class="post"><div class="post__title-block"><h1 class="post__title"><a href="/display-rat-losslessly-smartly-go/">Display *big.Rat Losslessly and Smartly in Golang</a></h1><span class="post__lang-tag font__ui">en</span></div><div lang="zh" class="post__meta font__ui">2023-10-10 | <span class="post__meta-categories"><a href="/categories/Tech/">Tech</a></span></div><div data-post-id="f309fb84cf3f4e2f451f2242181b9134a00554354d4891244b3f06a7b0318ade" class="post__content font__body"><p>Floating-point numbers, as we know, are notorious for losing precision when their values become too large or too small. They are also bad at representing decimals accurately, yielding confusions like <code>0.1 + 0.2 != 0.3</code> for every beginner in their programming 101.</p><p>Albeit being imprecise, floats are good enough for most daily scenarios. For those not, however, Golang provides <code>*big.Rat</code> to the rescue. Rats are designed to represent rational numbers with arbitary precision, addressing most flaws of floats, yet at a cost of much slower computation speed and bigger memory footprint. For example, we are confident to compare <code>0.1 + 0.2</code> to <code>0.3</code> using Rats without caring about tolerance:</p></div><div lang="zh" class="post__readmore font__ui"><a href="/display-rat-losslessly-smartly-go/">READ MORE</a></div></article><article lang="zh" class="post"><div class="post__title-block"><h1 class="post__title"><a href="/coding-ceremory/">代码的仪式</a></h1><span class="post__lang-tag font__ui">zh</span></div><div lang="zh" class="post__meta font__ui">2023-09-07 | <span class="post__meta-categories"><a href="/categories/Tech/">Tech</a><a href="/categories/Soliloquy/"> Soliloquy</a></span></div><div data-post-id="6835b7e840c212e80dfb0fbbc656a6b5d35664c8922c2c2e7fec3d86ae45bd0a" class="post__content font__body"><p>我们常能在英文社区看到 coding ceremory 一词，或译为 代码的仪式。Stack Overflow 上有个问题 <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/68092498/what-does-low-ceremony-mean">What does “low ceremony” mean?</a>，作者曾如此提问：</p><blockquote><p>In the Trac Main Features page https://trac.edgewall.org/wiki/TracFeatures, Trac is said to emphasize “ease of use and low ceremony”. Can someone please explain what “ceremony” means in the context of software usage?</p></blockquote><p class="par">low ceremony 与 ease of use 作并列短语，可见在程序开发的语境下，代码的仪式不是一个褒义词——过多的仪式并没有好处。用户 Rowan Freeman 则作此回答：</p><blockquote><p>Low ceremony means a small amount of code to achieve something. It means you don’t need to set up a lot of things in order to get going.</p></blockquote><p class="par">如其所述，代码的仪式是<strong>完成一个功能所需要的额外准备</strong>。仪式越少，准备工作越简洁，完成起来也越容易。</p><p>代码仪式被称为仪式，正如古代祭祀的舞蹈，传统庆典的繁文缛节，其对完成目标贡献甚微，却又是不可或缺的步骤。复杂的仪式冗长而乏味，我们偏偏还得忍受其枯燥，如履薄冰，完成得分毫不差——这也解释了为什么大多数人都不喜欢代码仪式。</p><h2 id="不同的代码仪式-1">不同的代码仪式</h2><p>依照呈现的形式，代码的仪式可以分为 编写仪式 和 运行仪式 两类。</p></div><div lang="zh" class="post__readmore font__ui"><a href="/coding-ceremory/">READ MORE</a></div></article><article lang="en" class="post"><div class="post__title-block"><h1 class="post__title"><a href="/building-electron-memo/">Building Electron From Scratch</a></h1><span class="post__lang-tag font__ui">en</span></div><div lang="zh" class="post__meta font__ui">2023-07-07 | <span class="post__meta-categories"><a href="/categories/Tech/">Tech</a><a href="/categories/Memo/"> Memo</a></span></div><div data-post-id="c90b74c48aca5d1f9dab48acead3952a050ae5d8e822784611b4cd8d87cc5ede" class="post__content font__body"><p>Last night I started a journey to build <a target="_blank" rel="noopener" href="https://github.com/electron/electron">Electron</a> completely from the ground up, for investigating <a target="_blank" rel="noopener" href="https://github.com/microsoft/vscode/issues/187126">a subtle issue</a> in VSCode.</p></div><div lang="zh" class="post__readmore font__ui"><a href="/building-electron-memo/">READ MORE</a></div></article><article lang="zh" class="post"><div class="post__title-block"><h1 class="post__title"><a href="/commutable-family-names-1/">中式亲属称谓研究之一：构建半群</a></h1><span class="post__lang-tag font__ui">zh</span></div><div lang="zh" class="post__meta font__ui">2023-06-16 | <span class="post__meta-categories"><a href="/categories/Tech/">Tech</a></span></div><div data-post-id="47c1c33ce991ac233d38052b4b484f03e9f98a14d7d6338a7d4f5d1e44e2410b" class="post__content font__body"><p>前段时间在 V2EX 的一个帖子 <a target="_blank" rel="noopener" href="https://www.v2ex.com/t/943948">/t/943948</a> 中看到了一个有趣的问题：</p><blockquote><p>在中文的亲属称谓体系中，我们会有“爸爸的爷爷”与“爷爷的爸爸”是同一个人，即“爸爸”和“爷爷”这两个称谓是可交换的。那么是否可以找到一个准则，以归纳所有这样的可交换称谓对？</p></blockquote><p>欲解决这个问题，我们可以先使用群论对亲属关系进行建模，在此基础上分析其代数结构，进而得出亲属关系可交换的条件。本系列期用两篇博文阐述这一理论。此为其第一篇，将介绍亲属半群的建立以及该代数结构的相关性质。</p></div><div lang="zh" class="post__readmore font__ui"><a href="/commutable-family-names-1/">READ MORE</a></div></article><article lang="en" class="post"><div class="post__title-block"><h1 class="post__title"><a href="/some-notes-on-kotlin-coroutines/">Some Notes on Kotlin Coroutines</a></h1><span class="post__lang-tag font__ui">en</span></div><div lang="zh" class="post__meta font__ui">2023-05-10 | <span class="post__meta-categories"><a href="/categories/Tech/">Tech</a></span></div><div data-post-id="e27a21a5356fefbba79b5a388e5d1cc8f2ba3991f2bc4804cecf27b46dd550c2" class="post__content font__body"><p>This post is written to dictate some opinionated explanation that dispels my confusion to Kotlin coroutines during learning.</p></div><div lang="zh" class="post__readmore font__ui"><a href="/some-notes-on-kotlin-coroutines/">READ MORE</a></div></article><article lang="en" class="post"><div class="post__title-block"><h1 class="post__title"><a href="/git-sparse-checkout-and-partial-clones-for-mega-repos/">Git sparse-checkout and partial clones for Mega-Repos</a></h1><span class="post__lang-tag font__ui">en</span></div><div lang="zh" class="post__meta font__ui">2023-05-05 | <span class="post__meta-categories"><a href="/categories/Memo/">Memo</a></span></div><div data-post-id="d70ac7e47439bfea2527b1dfa08663a47f5d1c60fb3c18a8b429f77e9bb9ab73" class="post__content font__body"><p>Recently I was planning to make a small contribution to project <a target="_blank" rel="noopener" href="https://github.com/DefinitelyTyped/DefinitelyTyped">DefinitelyTyped/DefinitelyTyped</a>. It is a huge repository that hosts and provides the type declaration files for thousands of packages on <a target="_blank" rel="noopener" href="https://npmjs.com/">npm</a>, with a structure like the following</p><div class="gk-code hljs" data-gk-id="BLOCK1"><div class="gk-code-display"><pre><span class="line">types/</span><br><span class="line">├── 11ty__eleventy-img</span><br><span class="line">├── 1line-aa</span><br><span class="line">├── 3box</span><br><span class="line">├── ...and more of them...</span><br></pre></div></div><p class="par">Each sub-folder under the <code>types/</code> directory corresponds to a specific npm package.</p><p>The package I am interested in is <code>marked</code>, whose type declaration files reside in <code>types/marked/</code> directory. Towards this end, cloning the whole repository and doing a full checkout is considered worthless, since my disk space and network traffic would be eaten up by a bunch of irrelevant files.</p></div><div lang="zh" class="post__readmore font__ui"><a href="/git-sparse-checkout-and-partial-clones-for-mega-repos/">READ MORE</a></div></article><article lang="zh" class="post"><div class="post__title-block"><h1 class="post__title"><a href="/disambiguate-feudalism/">辩义“封建”</a></h1><span class="post__lang-tag font__ui">zh</span></div><div lang="zh" class="post__meta font__ui">2023-04-20 | <span class="post__meta-categories"><a href="/categories/Soliloquy/">Soliloquy</a></span></div><div data-post-id="8c51a9d645a7d9eef81e3c61dbabedd2ffc7816e11eb1b269feb4a5375d0ef67" class="post__content font__body"><p>“封建”一词很有意思。作为一个土生土长的中国词，它于千年前便有了固定而确切的含义。然而在近代西方思潮的冲击下，这个词的意义先是遭到了替换，而后又在近百年的传播中演化成了与本义毫不相干的概念。如今的人们谈及封建一词时，心中不免会有困惑，因为其现代含义与汉字构成相去甚远。更糟糕的是，在一些语境下，这个词会回归至其近代甚至是古代的含义，从而对相关的交流造成混乱。同一词的释义在多种语境下不一致，无谓的争吵便在所难免。</p><p>粗略地说，“封建”至少有四种释义，即古代中国的封建制度、古代欧洲的 Feudalism、近现代中国与 Feudalism 的对译，以及当代民间语境中的封建。</p></div><div lang="zh" class="post__readmore font__ui"><a href="/disambiguate-feudalism/">READ MORE</a></div></article><article lang="en" class="post"><div class="post__title-block"><h1 class="post__title"><a href="/diving-from-the-cuda-error-804-into-a-bug-of-libnvidia-container/">Diving from the CUDA Error 804 into a bug of libnvidia-container</a></h1><span class="post__lang-tag font__ui">en</span></div><div lang="zh" class="post__meta font__ui">2023-03-19 | <span class="post__meta-categories"><a href="/categories/Tech/">Tech</a></span></div><div data-post-id="7fd82cdfbc9fbe94a914f77e899ca219b3805a706be05911d4d43ddaffa2a32f" class="post__content font__body"><p>Several users reported to encounter <code>&quot;Error 804: forward compatibility was attempted on non supported HW&quot;</code> during the usage of some customized PyTorch docker images on our GPU cluster.</p><p>At first glance I recognized the culprit to be a version mismatch between installed driver on the host and required driver in the image. The corrupted images as they described were built targeting <code>CUDA == 11.3</code> with a corresponding driver version <code>== 465</code> , while some of our hosts are shipped with driver version <code>460</code>. As a solution I told them to downgrade the targeting CUDA version by choosing a base image such as <code>nvidia/cuda:11.2.0-devel-ubuntu18.04</code>, which indeed well solved the problem.</p><p>But later on I suspected the above hypothesis being the real cause. An observed counterexample was that another line of docker images targeting even higher CUDA version would run normally on those hosts, for example, the latest <code>ghcr.io/pytorch/pytorch:2.0.0-devel</code> built for <code>CUDA == 11.7</code>. This won’t be the case if CUDA version mismatch truly matters.</p><p>Afterwards I did a bit of research concerning the problem and learnt some interesting stuff which this post is going to share. In short, <strong>the recently released minor version compatibility allows applications built for newer CUDA to run on machines with some older drivers, but libnvidia-container doesn’t correcly handle it due to <a target="_blank" rel="noopener" href="https://github.com/NVIDIA/libnvidia-container/issues/138">a bug</a> and eventually leads to such an error</strong>.</p><p>Towards thorough comprehension, this post will first introduce the constitution of CUDA components, following with the compatibility policy of different components, and finally unravel the bug and devise a workaround for it. But before diving deep, I’ll give two Dockerfile samples to illustrate the problem.</p></div><div lang="zh" class="post__readmore font__ui"><a href="/diving-from-the-cuda-error-804-into-a-bug-of-libnvidia-container/">READ MORE</a></div></article><article lang="en" class="post"><div class="post__title-block"><h1 class="post__title"><a href="/gpg-and-github-interoperation/">Modern Cryptography, GPG and Integration with Git(hub)</a></h1><span class="post__lang-tag font__ui">en</span></div><div lang="zh" class="post__meta font__ui">2023-01-03 | <span class="post__meta-categories"><a href="/categories/Tech/">Tech</a></span></div><div data-post-id="a4feb1131ed62110dc30968667c4bbad4567554efface2551cc406da5811e5db" class="post__content font__body"><p><a target="_blank" rel="noopener" href="https://gnupg.org/">GPG</a> (the GNU Privacy Guard) is a complete and free implementation of the <a target="_blank" rel="noopener" href="https://www.openpgp.org/">OpenPGP</a> standard. Based on various mature algorithms to select from, GPG acts as a convenient tool for daily cryptographic communication.</p><p>GPG has two primary functionalities: (1) it encrypts and signs your data for secure transfering and verifiable information integrity, and (2) it features a versatile key management system to construct and promote web of trust. GPG also has a well-designed command line interface for easy integration with other applications such as git.</p><p>This article is going to briefly elaborate some key concepts and usage of GPG, and then present demonstration to cryptographically sign git commits with the help of GPG.</p></div><div lang="zh" class="post__readmore font__ui"><a href="/gpg-and-github-interoperation/">READ MORE</a></div></article><article lang="en" class="post"><div class="post__title-block"><h1 class="post__title"><a href="/move-ubuntu-root-partition/">Move the Root Partition of Ubuntu</a></h1><span class="post__lang-tag font__ui">en</span></div><div lang="zh" class="post__meta font__ui">2022-11-13 | <span class="post__meta-categories"><a href="/categories/Tech/">Tech</a></span></div><div data-post-id="c5e13214f74ea716a4d16f43b156c2d5546041c9ea1be085bdf106aa0cedaf25" class="post__content font__body"><p>A few days ago, I decided to shrink the footprint of the Windows system on my laptop and reallocate the freed-up disk space to Ubuntu, which I use alongside it. Since I primarily rely on Ubuntu for programming and web browsing, I’ve rarely booted into the OEM-shipped Windows since purchasing the laptop. Windows occupies a significant portion of my SSD, and reclaiming that space allows for better use rather than letting it sit idle.</p><div class="gk-code hljs" data-gk-id="BLOCK1"><div class="gk-code-display"><pre><span class="line">#gk:immersive</span><br><span class="line">(before)</span><br><span class="line">| --- Windows C: (256 GB) --- | --- Ubuntu / (256 GB) --- |</span><br><span class="line">(after)</span><br><span class="line">| --- Windows C: (120 GB) --- | --- Ubuntu / (392 GB) --- |</span><br></pre></div></div></div><div lang="zh" class="post__readmore font__ui"><a href="/move-ubuntu-root-partition/">READ MORE</a></div></article></div><div lang="zh" class="page-navigator font__ui"><span class="page__button"><a href="/page/2/" class="pre">PREV</a></span><span class="page__button"><a href="/page/4/" class="next">NEXT</a></span></div></main><section class="aside__group"><span class="aside__btn"><div lang="zh" class="github-btn"><a href="#" rel="noopener noreferrer" target="_blank" class="gh-btn"><span class="gh-ico"></span><span class="gh-text">FOLLOW ME</span></a><a href="#" rel="noopener noreferrer" target="_blank" class="gh-count"></a></div><script>window.GH_BUTTON={username:"hsfzxjy"}</script></span><aside class="aside__left"><div class="aside__menuList"><span class="aside__menuList-item__icon current"><i class="icon-home"></i></span><a href="/" class="aside__menuList-item current"><span lang="zh" class="font__ui">首页 / Home</span></a><span class="aside__menuList-item__icon"><i class="icon-embed2"></i></span><a href="/categories/Tech/" class="aside__menuList-item"><span lang="zh" class="font__ui">科技 / Tech</span></a><span class="aside__menuList-item__icon"><i class="icon-android"></i></span><a href="/categories/Soliloquy/" class="aside__menuList-item"><span lang="zh" class="font__ui">呓语 / Soliloquy</span></a><span class="aside__menuList-item__icon"><i class="icon-leaf"></i></span><a href="/categories/Life/" class="aside__menuList-item"><span lang="zh" class="font__ui">生活 / Life</span></a><span class="aside__menuList-item__icon"><i class="icon-bookmarks"></i></span><a href="/categories/Memo/" class="aside__menuList-item"><span lang="zh" class="font__ui">速记 / Memo</span></a><span class="aside__menuList-item__icon"><i class="icon-books"></i></span><a href="/categories/Series/" class="aside__menuList-item"><span lang="zh" class="font__ui">连载 / Series</span></a><span class="aside__menuList-item__icon"><i class="icon-sigma"></i></span><a href="/works/" class="aside__menuList-item"><span lang="zh" class="font__ui">项目 / Projects</span></a><span class="aside__menuList-item__icon"><i class="icon-earth"></i></span><a href="/links/" class="aside__menuList-item"><span lang="zh" class="font__ui">友链 / Links</span></a><span class="aside__menuList-item__icon"><i class="icon-wink"></i></span><a href="/about/" class="aside__menuList-item"><span lang="zh" class="font__ui">关于 / About</span></a><span class="aside__menuList-item__icon"><i class="icon-history"></i></span><a href="/aggr/" class="aside__menuList-item"><span lang="zh" class="font__ui">索引 / Index</span></a><span class="aside__menuList-item__icon"><i class="icon-rss2"></i></span><a href="/rss.xml" class="aside__menuList-item"><span lang="zh" class="font__ui">订阅 / RSS</span></a></div></aside><aside class="aside__right"></aside></section><div id="footer" style="text-align:center" lang="zh" class="font__ui">© <a href="/" rel="nofollow">hsfzxjy 的博客.</a>&nbsp;Powered by&nbsp;<a rel="nofollow" target="_blank" href="https://hexo.io">Hexo.</a>&nbsp;<a rel="nofollow" target="_blank" href="https://github.com/hsfzxjy/byak-hexo">Theme</a>&nbsp;by&nbsp;<a rel="nofollow" target="_blank" href="https://github.com/hsfzxjy">hsfzxjy</a>.<div style="margin-top:10px"><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011202001249" style="display:inline-block;text-decoration:none;height:20px;line-height:20px"><img src="/img/beian.png" style="float:left" loading="lazy"><span style="float:left;height:20px;line-height:20px;margin:0 0 0 5px;color:#939393">粤公网安备44011202001249号</span></a><a target="_blank" style="display:inline-block;text-decoration:none;height:20px;line-height:20px" href="http://beian.miit.gov.cn/"><span style="float:left;height:20px;line-height:20px;margin:0 0 0 5px;color:#939393">粤ICP备2020075702号-1</span></a></div></div></body><script src="/dist/js/main.js" async defer></script></html>