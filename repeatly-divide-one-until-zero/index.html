<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=5" name="viewport"><meta content="yes" name="mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><script>(()=>{let r="/cnfonts.js",n=document,e=n.createElement("link");e.rel="stylesheet",e.href="/fontchan/jBKCaHQX.css",e.blocking="render",e.onerror=()=>{var e=n.createElement("script");e.src=r,e.onload=()=>$fontchan.injectCss(),n.head.appendChild(e)},n.head.appendChild(e),"serviceWorker"in navigator&&navigator.serviceWorker.register(r,{scope:"/"}).then(e=>e.update())})()</script><title>一尺之槌，日取其半，1075日而竭</title><meta itemprop="title" content="一尺之槌，日取其半，1075日而竭 - hsfzxjy 的博客"><meta itemprop="og:title" content="一尺之槌，日取其半，1075日而竭 - hsfzxjy 的博客"><meta itemprop="image" content="https://i.hsfzxjy.site/avatar-for-hsfzxjy.jpg"><meta itemprop="og:image" content="https://i.hsfzxjy.site/avatar-for-hsfzxjy.jpg"><meta itemprop="description" content="今天的故事源自数月前我在 r/learnpython 上回答的一个问题。以下是对该问题的转述：

将 64 位浮点..."><meta itemprop="og:type" content="website"><link rel="stylesheet" href="/dist/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="alternate" type="application/rss+xml" href="/rss.xml"></head><body><nav class="nav"><span class="nav__toggler"><span class="nav__toggler-bar bar1"></span><span class="nav__toggler-bar bar2"></span><span class="nav__toggler-bar bar3"></span></span><span class="nav__core"><div class="nav__logo"><img src="/avatar.webp" loading="lazy"></div><a href="/" lang="zh" class="nav__brand">hsfzxjy</a></span><span class="nav__togglerClose"><span class="nav__togglerClose-circle"></span><span class="nav__togglerClose-bar bar1"></span><span class="nav__togglerClose-bar bar2"></span></span><div class="nav__pathIndicator"><a href="/categories/Tech/">Tech</a></div></nav><main class="mainContainer"><div lang="zh" class="post post-page"><h1 lang="zh" class="post__title">一尺之槌，日取其半，1075日而竭</h1><div class="post__meta font__ui">2024-10-10 | <span class="post__meta-categories"><a href="/categories/Tech/">Tech</a></span></div><div class="post__content font__body"><p>今天的故事源自数月前我在 r/learnpython 上<a target="_blank" rel="noopener" href="https://www.reddit.com/r/learnpython/comments/19d29rm/comment/kj2zei5/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button">回答的一个问题</a>。以下是对该问题的转述：</p><blockquote><p>将 64 位浮点数 1.0 不断除以 2，多少次后恰好变为 0？</p></blockquote><blockquote><div class="gk-unified-code tab" data-gk-style="tab"><div class="gk-code hljs" data-gk-id="python-sample" data-gk-title="Python"><div class="gk-code-display"><pre><span class="line">x, i = <span class="hljs-number">1.0</span>, <span class="hljs-number">0</span></span><br><span class="line"><span class="hljs-keyword">while</span> x:</span><br><span class="line">    x /= <span class="hljs-number">2.0</span></span><br><span class="line">    i += <span class="hljs-number">1</span></span><br><span class="line"><span class="hljs-built_in">print</span>(i)  <span class="hljs-comment"># 1075</span></span><br></pre></div></div><div class="gk-code hljs" data-gk-id="rust-sample" data-gk-title="Rust"><div class="gk-code-display"><pre><span class="line"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {</span><br><span class="line">    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">x</span> = <span class="hljs-number">1.0f64</span>;</span><br><span class="line">    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">i</span> = <span class="hljs-number">0</span>;</span><br><span class="line">    <span class="hljs-keyword">while</span> x != <span class="hljs-number">0</span>. {</span><br><span class="line">        x /= <span class="hljs-number">2.0</span>;</span><br><span class="line">        i += <span class="hljs-number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;{}&quot;</span>, i);  <span class="hljs-comment">// 1075</span></span><br><span class="line">}</span><br></pre></div></div><div class="gk-code hljs" data-gk-id="js-sample" data-gk-title="JS"><div class="gk-code-display"><pre><span class="line"><span class="hljs-keyword">let</span> x = <span class="hljs-number">1</span>,</span><br><span class="line">  i = <span class="hljs-number">0</span></span><br><span class="line"><span class="hljs-keyword">while</span> (x) {</span><br><span class="line">  x /= <span class="hljs-number">2</span></span><br><span class="line">  i++</span><br><span class="line">}</span><br><span class="line"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i) <span class="hljs-comment">// 1075</span></span><br></pre></div></div></div></blockquote><p>古语云：“一尺之槌，日取其半，万世不竭”。但很显然，此话不适用于这个问题。浮点数的精度是有限的，当 <code>x / 2</code> 足够小时，浮点数终无法表示，便会得到结果 0。如以上代码所示，循环将终结在第 1075 次。</p><p>1075 次。这表明 64 位浮点能表示的最小数在 $2^{-1075}$ 这个量级，再小的数超出了表示范围，也就归于零了。但 1075 这个数很奇怪，它离 1024 很近，但又多出来一些，有零有整的，这是为什么呢？</p><p>这一切还要从浮点数的分类说起。</p><h2 id="浮点数的分类">浮点数的分类</h2><p>精通 Javascript 的读者会记得，JS 的数字体系中有一些奇怪的值，如 <code>±Infinity</code>、<code>NaN</code>、<code>±0</code>。这些值行为怪异，有着和“正常值”与众不同的运算法则。</p><p>这不是因为 JS 标新立异，恰恰相反，这是因为 JS 遵循了 IEEE 754 标准。JS 采用 IEEE 754 标准中的 64 位浮点数（以下简称 FP64）表示数字，而 <code>±Infinity</code>、<code>NaN</code> 等是标准中定义好的一系列特殊值，用来表示浮点运算中的诸多异常结果，如除以零、上下溢出等等。</p><p>这不免让人好奇：FP64 中一共有哪几类值呢？除了无穷大、零和 NaN 外，其他的都是正常值吗？</p><p>Rust 提供了一个非常有用的函数 <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/stable/core/primitive.f64.html#method.classify"><code>f64::classify()</code></a>，顾名思义即为浮点数作分类。该函数返回的结果是 <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/stable/core/num/enum.FpCategory.html"><code>core::num::FpCategory</code></a>，其定义如下：</p><div class="gk-code hljs" data-gk-id="BLOCK1"><div class="gk-code-display"><pre><span class="line"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">FpCategory</span> {</span><br><span class="line">    Nan,</span><br><span class="line">    Infinite,</span><br><span class="line">    Zero,</span><br><span class="line">    Subnormal,</span><br><span class="line">    Normal,</span><br><span class="line">}</span><br></pre></div></div><p>可以看到浮点数被分成五类，其中有三类 <code>Infinite</code>、<code>Zero</code> 和 <code>Nan</code> 为我们熟知，分别代表 无穷大、零和 NaN 三种情况。但刨去这些特殊值，还有两个类别 <code>Subnormal</code> 和 <code>Normal</code>。它们分别代表什么呢？</p><p>要了解二者的区别，我们要先知道 FP64 的二进制表示是如何构成的。</p><h2 id="fp64-的二进制表示">FP64 的二进制表示</h2><p>64 位浮点数，顾名思义，即采用 64 个比特位表示一个实数 x。这 64 位由三部分组成：符号 s、指数 e 和底数 m，分别占据 1、11 和 52 位长度。下图详细展示了 -0.9375 的二进制表示，用不同颜色标出了这三个部分：</p><figure class="d2"><svg xmlns="http://www.w3.org/2000/svg" width="526" height="292" preserveAspectRatio="xMinYMin meet" viewBox="0 0 751 417"><svg id="d2-svg" width="751" height="417" class="d2-1928264720" viewBox="0 0 751 417"><rect width="751" height="417" stroke-width="0" rx="0" style="fill:#fff"/><style>@font-face{font-family:d2-1928264720-font-regular;src:url(data:application/font-woff;base64,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)}.text-underline{text-decoration:underline}.d2-1928264720 .text-bold{font-family:d2-1928264720-font-bold}@font-face{font-family:d2-1928264720-font-bold;src:url(data:application/font-woff;base64,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)}.shape{shape-rendering:geometricPrecision;stroke-linejoin:round}.d2-1928264720 .fill-N1{fill:#0a0f25}.d2-1928264720 .stroke-B1{stroke:#0d32b2}</style><g id="bin"><g class="shape"><path fill="transparent" d="M0 0h751v334H0z" class="stroke-B1" style="stroke-width:0"/></g><text x="375.5" y="33" class="fill-N1" style="font-family:d2-1928264720-font-regular;text-anchor:middle;font-size:28px">Normal FP64</text></g><g id="result"><g class="shape"><path fill="transparent" d="M0 334h751v83H0z" class="stroke-B1" style="stroke-width:0"/></g><text x="375.5" y="386.5" class="text-bold fill-N1" style="text-anchor:middle;font-size:30px">x = (-1) × 0.5 × 1.875 = -0.9375</text></g><g id="bin.'s = sign (1 bit)'" class="header"><g class="shape"><path fill="#fff0f5" d="M0 46h190v82H0z" class="stroke-B1" style="stroke-width:0"/></g><text x="95" y="92.5" class="text-bold text-underline fill-N1" style="text-anchor:middle;font-size:16px">s = sign (1 bit)</text></g><g id="bin.'e = exponent (11 bit)\n(1≤e≤2046)'" class="header"><g class="shape"><path fill="#e6e6fa" d="M190 46h267v82H190z" class="stroke-B1" style="stroke-width:0"/></g><text x="323.5" y="84.5" class="text-bold text-underline fill-N1" style="text-anchor:middle;font-size:16px"><tspan x="323.5" dy="0">e = exponent (11 bit)</tspan><tspan x="323.5" dy="18.5">(1≤e≤2046)</tspan></text></g><g id="bin.'m = fraction (52 bit)'" class="header"><g class="shape"><path fill="#f0f8ff" d="M457 46h294v82H457z" class="stroke-B1" style="stroke-width:0"/></g><text x="604" y="92.5" class="text-bold text-underline fill-N1" style="text-anchor:middle;font-size:16px">m = fraction (52 bit)</text></g><g id="bin.1"><g class="shape"><path fill="pink" d="M0 128h190v82H0z" class="stroke-B1" style="stroke-width:0"/></g><text x="95" y="174.5" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">1</text></g><g id="bin.01111111110"><g class="shape"><path fill="#d8bfd8" d="M190 128h267v82H190z" class="stroke-B1" style="stroke-width:0"/></g><text x="323.5" y="174.5" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">01111111110</text></g><g id="bin.'11100000000000000000000000\n00000000000000000000000000'"><g class="shape"><path fill="#add8e6" d="M457 128h294v82H457z" class="stroke-B1" style="stroke-width:0"/></g><text x="604" y="166.5" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px"><tspan x="604" dy="0">11100000000000000000000000</tspan><tspan x="604" dy="18.5">00000000000000000000000000</tspan></text></g><g id="bin.xx1" class="shape"><path fill="transparent" d="M0 210h190v124H0z" class="stroke-B1" style="stroke-width:0"/></g><g id="bin.xx2" class="shape"><path fill="transparent" d="M190 210h267v124H190z" class="stroke-B1" style="stroke-width:0"/></g><g id="bin.'M=(1.m₅₁m₅₀...m₀)₂\n=(1.111000000...)₂\n=1.875'"><g class="shape"><path fill="transparent" d="M457 210h294v124H457z" class="stroke-B1" style="stroke-width:0"/></g><text x="604" y="256.5" fill="#00008b" class="text-bold" style="text-anchor:middle;font-size:24px"><tspan x="604" dy="0">M=(1.m₅₁m₅₀...m₀)₂</tspan><tspan x="604" dy="26.333">=(1.111000000...)₂</tspan><tspan x="604" dy="26.333">=1.875</tspan></text></g><g id="bin.xx1.'S=(-1)^s\n =(-1)^1\n=-1'"><g class="shape"><path fill="transparent" d="M0 210h131v124H0z" class="stroke-B1" style="stroke-width:0"/></g><text x="65.5" y="256.5" fill="#cd5c5c" class="text-bold" style="text-anchor:middle;font-size:24px"><tspan x="65.5" dy="0">S=(-1)^s</tspan><tspan x="65.5" dy="26.333">=(-1)^1</tspan><tspan x="65.5" dy="26.333">=-1</tspan></text></g><g id="bin.xx1.×"><g class="shape"><path fill="transparent" d="M131 210h59v124h-59z" class="stroke-B1" style="stroke-width:0"/></g><text x="160.5" y="280.5" class="text-bold fill-N1" style="text-anchor:middle;font-size:24px">×</text></g><g id="bin.xx2.'2^E=2^(e-1023)\n=2^(1022-1023)\n=2^(-1)'"><g class="shape"><path fill="transparent" d="M190 210h208v124H190z" class="stroke-B1" style="stroke-width:0"/></g><text x="294" y="256.5" fill="#9400d3" class="text-bold" style="text-anchor:middle;font-size:24px"><tspan x="294" dy="0">2^E=2^(e-1023)</tspan><tspan x="294" dy="26.333">=2^(1022-1023)</tspan><tspan x="294" dy="26.333">=2^(-1)</tspan></text></g><g id="bin.xx2.×"><g class="shape"><path fill="transparent" d="M398 210h59v124h-59z" class="stroke-B1" style="stroke-width:0"/></g><text x="427.5" y="280.5" class="text-bold fill-N1" style="text-anchor:middle;font-size:24px">×</text></g><mask id="d2-1928264720" width="751" height="417" x="0" y="0" maskUnits="userSpaceOnUse"><path fill="#fff" d="M0 0h751v417H0z"/><path fill="rgba(0,0,0,0.75)" d="M301 5h149v36H301zM178.5 356.5h394v38h-394zM46.5 76.5h97v21h-97zM251.5 68.5h144v37h-144zM535 76.5h138v21H535zM91.5 158.5h7v21h-7zM277 158.5h93v21h-93zM494 150.5h220v37H494zM479.5 232.5h249v79h-249zM22.5 232.5h86v79h-86zM153.5 256.5h14v31h-14zM212.5 232.5h163v79h-163zM420.5 256.5h14v31h-14z"/></mask></svg></svg></figure><p>我们常用科学计数法 $\pm a \times p^n$ 表示大数。FP64 也是类似的，只不过是在二进制意义下。FP64 使用如下公式，将 s, e, m 组合成实数 x：</p><p>$$ \begin{align} x = (-1)^s \times 2^{e-1023} \times \left(1+m / 2 ^{52}\right) \label{eq:normal} \end{align} $$</p><p>不难发现其与科学计数法的相似性。FP64 将底数的范围固定为 $[1,2)$，最后的 52 位 m 正是底数的小数部分；中间的 11 位 e 取值范围为 $[1, 2046]$，用于合成指数；而最高位的符号位 s 顾名思义，即指示 x 的正负性。在后文中，为了叙述方便，我们也会将 x 的 FP64 表示中的这三部分记为 $\text{fp}_s(x)$、$\text{fp}_e(x)$ 和 $\text{fp}_m(x)$。</p><p>细心的读者可能又会奇怪了，为什么 e 的范围是 $[1, 2046]$ 呢？e 有 11 位，理论上取值范围应该是 $[0, 2047]$，还有两个值 $e=0$ 和 $e=2047$ 去哪了？</p><p>事实上，这两个值被 IEEE 754 特意空了出来，用于表示一些特殊的值。比如当 $s = e = m = 0$ 时，x 的值为 +0。更具体些，根据 e 和 m 的不同取值，FP64 的值可以分为以下五类：</p><ul><li>$e \in [1, 2046]$ 时，$x$ 为 Normal；</li><li>$e=2047, m = 0$ 时，$x$ 为 ±Infinity；</li><li>$e=2047, m \not = 0$ 时，$x$ 为 NaN；</li><li>$e = 0, m = 0$ 时，$x$ 为 ±0；</li><li>$e = 0, m \not = 0$ 时，$x$ 为 Subnormal。</li></ul><p>本文只关注最后一类 Subnormal 浮点数，以下简称 Subnormal FP。</p><h2 id="subnormal-fp">Subnormal FP</h2><p>Subnormal FP，顾名思义，即比 Normal FP 还要小的一类数。事实上，它们的计算也有别于 Normal FP：</p><p>$$ \begin{equation} x = (-1)^s \times 2^{-1022} \times (m / 2^{52}) \label{eq:subnormal} \end{equation} $$</p><p>下图给出了一个 Subnormal 浮点数 $x=-3\times 2^{-1074}$ 的例子</p><figure class="d2"><svg xmlns="http://www.w3.org/2000/svg" width="501" height="292" preserveAspectRatio="xMinYMin meet" viewBox="0 0 715 417"><svg id="d2-svg" width="715" height="417" class="d2-2895707930" viewBox="0 0 715 417"><rect width="715" height="417" stroke-width="0" rx="0" style="fill:#fff"/><style>@font-face{font-family:d2-2895707930-font-regular;src:url(data:application/font-woff;base64,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)}.text-underline{text-decoration:underline}.d2-2895707930 .text-bold{font-family:d2-2895707930-font-bold}@font-face{font-family:d2-2895707930-font-bold;src:url(data:application/font-woff;base64,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)}.shape{shape-rendering:geometricPrecision;stroke-linejoin:round}.d2-2895707930 .fill-N1{fill:#0a0f25}.d2-2895707930 .stroke-B1{stroke:#0d32b2}</style><g id="bin"><g class="shape"><path fill="transparent" d="M0 0h715v334H0z" class="stroke-B1" style="stroke-width:0"/></g><text x="357.5" y="33" class="fill-N1" style="font-family:d2-2895707930-font-regular;text-anchor:middle;font-size:28px">Subnormal FP64</text></g><g id="result"><g class="shape"><path fill="transparent" d="M0 334h715v83H0z" class="stroke-B1" style="stroke-width:0"/></g><text x="357.5" y="386.5" class="text-bold fill-N1" style="text-anchor:middle;font-size:30px">x = (-1) × 2^(-1022) × 3 × 2^(-52) = -3 × 2^(-1074)</text></g><g id="bin.'s = sign (1 bit)'" class="header"><g class="shape"><path fill="#fff0f5" d="M0 46h192v82H0z" class="stroke-B1" style="stroke-width:0"/></g><text x="96" y="92.5" class="text-bold text-underline fill-N1" style="text-anchor:middle;font-size:16px">s = sign (1 bit)</text></g><g id="bin.'e = exponent (11 bit)\n(e=0)'" class="header"><g class="shape"><path fill="#e6e6fa" d="M192 46h229v82H192z" class="stroke-B1" style="stroke-width:0"/></g><text x="306.5" y="84.5" class="text-bold text-underline fill-N1" style="text-anchor:middle;font-size:16px"><tspan x="306.5" dy="0">e = exponent (11 bit)</tspan><tspan x="306.5" dy="18.5">(e=0)</tspan></text></g><g id="bin.'m = fraction (52 bit)'" class="header"><g class="shape"><path fill="#f0f8ff" d="M421 46h294v82H421z" class="stroke-B1" style="stroke-width:0"/></g><text x="568" y="92.5" class="text-bold text-underline fill-N1" style="text-anchor:middle;font-size:16px">m = fraction (52 bit)</text></g><g id="bin.1"><g class="shape"><path fill="pink" d="M0 128h192v82H0z" class="stroke-B1" style="stroke-width:0"/></g><text x="96" y="174.5" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">1</text></g><g id="bin.01111111110"><g class="shape"><path fill="#d8bfd8" d="M192 128h229v82H192z" class="stroke-B1" style="stroke-width:0"/></g><text x="306.5" y="174.5" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px">01111111110</text></g><g id="bin.'00000000000000000000000000\n00000000000000000000000011'"><g class="shape"><path fill="#add8e6" d="M421 128h294v82H421z" class="stroke-B1" style="stroke-width:0"/></g><text x="568" y="166.5" class="text-bold fill-N1" style="text-anchor:middle;font-size:16px"><tspan x="568" dy="0">00000000000000000000000000</tspan><tspan x="568" dy="18.5">00000000000000000000000011</tspan></text></g><g id="bin.xx1" class="shape"><path fill="transparent" d="M0 210h192v124H0z" class="stroke-B1" style="stroke-width:0"/></g><g id="bin.xx2" class="shape"><path fill="transparent" d="M192 210h229v124H192z" class="stroke-B1" style="stroke-width:0"/></g><g id="bin.'M=(0.m₅₁m₅₀...m₀)₂\n=(0.000000000...11)₂\n=3×2^(-52)'"><g class="shape"><path fill="transparent" d="M421 210h294v124H421z" class="stroke-B1" style="stroke-width:0"/></g><text x="568" y="256.5" fill="#00008b" class="text-bold" style="text-anchor:middle;font-size:24px"><tspan x="568" dy="0">M=(0.m₅₁m₅₀...m₀)₂</tspan><tspan x="568" dy="26.333">=(0.000000000...11)₂</tspan><tspan x="568" dy="26.333">=3×2^(-52)</tspan></text></g><g id="bin.xx1.'S=(-1)^1'"><g class="shape"><path fill="transparent" d="M0 210h133v76H0z" class="stroke-B1" style="stroke-width:0"/></g><text x="66.5" y="256.5" fill="#cd5c5c" class="text-bold" style="text-anchor:middle;font-size:24px">S=(-1)^1</text></g><g id="bin.xx1.×"><g class="shape"><path fill="transparent" d="M133 210h59v76h-59z" class="stroke-B1" style="stroke-width:0"/></g><text x="162.5" y="256.5" class="text-bold fill-N1" style="text-anchor:middle;font-size:24px">×</text></g><g id="bin.xx2.'E=2^(-1022)'"><g class="shape"><path fill="transparent" d="M192 210h170v76H192z" class="stroke-B1" style="stroke-width:0"/></g><text x="277" y="256.5" fill="#9400d3" class="text-bold" style="text-anchor:middle;font-size:24px">E=2^(-1022)</text></g><g id="bin.xx2.×"><g class="shape"><path fill="transparent" d="M362 210h59v76h-59z" class="stroke-B1" style="stroke-width:0"/></g><text x="391.5" y="256.5" class="text-bold fill-N1" style="text-anchor:middle;font-size:24px">×</text></g><mask id="d2-2895707930" width="715" height="417" x="0" y="0" maskUnits="userSpaceOnUse"><path fill="#fff" d="M0 0h715v417H0z"/><path fill="rgba(0,0,0,0.75)" d="M261 5h193v36H261zM40.5 356.5h634v38h-634zM47.5 76.5h97v21h-97zM234.5 68.5h144v37h-144zM499 76.5h138v21H499zM92.5 158.5h7v21h-7zM260 158.5h93v21h-93zM458 150.5h220v37H458zM443.5 232.5h249v79h-249zM22.5 232.5h88v31h-88zM155.5 232.5h14v31h-14zM214.5 232.5h125v31h-125zM384.5 232.5h14v31h-14z"/></mask></svg></svg></figure><p>Subnormal FP 与 Normal FP 的区别主要体现在以下几点：</p><ul><li>由于 $\text{fp}_e(x)$ 固定为了 $0$，表达式 $\eqref{eq:subnormal}$ 中不再出现字母 $e$，而是直接用 $2^{-1022}$；</li><li>底数的范围不再是 $[1,2)$，而是 $[0,1)$，因此表达式中 $\eqref{eq:subnormal}$ 的 $1+m/2^{52}$ 变成了 $m/2^{52}$。</li></ul><p>容易看出，由于 $2^{-1022}$ 这一项的存在，Subnormal FP 所表示的数绝对值都很小。这实际上弥补了 Normal FP 和 0 之间的空隙，使得 FP64 能够表示更多的数。我们还能看到，这种设计是融洽且符合直觉的：</p><ul><li>Normal FP 的最小值与 Subnormal FP 的最大值紧密相连，分别是 $2^{-1022}$ 和 $2^{-1022} \times (1 - 2^{-52})$；</li><li>零可以看作是 Subnormal FP 的特例。事实上，把 $s = m = 0$ 带入 $\eqref{eq:subnormal}$，正好可以得到 $0$。</li></ul><p>尽管都能表示实数，但由于 Normal FP 和 Subnormal FP 的计算方式不同，IEEE 754 还是正式地将它们区分开来，并置于两个独立的类别中。</p><h2 id="解密-1075">解密 1075</h2><p>有了 Normal FP 和 Subnormal FP 的前置知识，我们终于可以解释为什么开头的代码会恰好在 1075 次后结束。本节先尝试用一个思想实验解释这一现象，然后用 Rust 代码验证这一点。</p><p>在思想实验前，我们先给出一条显而易见的规则：如果 $x$ 和 $x/2$ 都是 Normal FP，则除法发生前后，s 和 m 都不变，只有 e 减一，即 $\text{fp}_e(x/2)=\text{fp}_e(x)-1$。读者可以结合 Normal FP 的定义 $\eqref{eq:normal}$ 自行验证这一点。</p><p>现在考察程序的起点，也就是 $x_0 = 1$ 的二进制表示：</p><p>$$\text{fp}_s(x_0) = 0, \text{fp}_e(x_0) = 1023, \text{fp}_m(x_0) = 0$$</p><p>根据前述规则，当 x 还在 Normal FP 的表示范围内时，每次除以二相当于将指数减一，直至指数达到 0。此过程可持续 1022 次：</p><p>$$ \begin{aligned} x_1 &amp;= 2^{-1} &amp;\leadsto &amp;\quad \text{fp}_s(x_1) = 0, \text{fp}_e(x_1) = 1022, \text{fp}_m(x_1) = 0 \\ x_2 &amp;= 2^{-2} &amp;\leadsto &amp;\quad \text{fp}_s(x_2) = 0, \text{fp}_e(x_2) = 1021, \text{fp}_m(x_2) = 0 \\ &amp;&amp;\ldots &amp;\\ x_{1022} &amp;= 2^{-1022} &amp;\leadsto &amp;\quad \text{fp}_s(x_{1022}) = 0, \text{fp}_e(x_{1022}) = 1, \text{fp}_m(x_{1022}) = 0 \\ \end{aligned} $$</p><p>此时若再进一步，我们将得到 $x_{1023} = 2^{-1023}$，但这个数已经离开了 Normal FP 的范围，进入到 Subnormal FP 的领域。</p><p>现在我们需要另一条规则：如果 $x$ 和 $x/2$ 都是 Subnormal FP，则做除法相当于将 m 右移 1 位，即 $\text{fp}_m(x/2)=\text{fp}_m(x)\ shr\ 1$。这一规则同样可以从 Subnormal FP 的定义 $\eqref{eq:subnormal}$ 中直接得到。运用这条规则，我们有：</p><p>$$ \begin{aligned} x_{1023} &amp;= 2^{-1023} &amp;\leadsto &amp;\quad \text{fp}_s(x_{1023}) = 0, \text{fp}_e(x_{1023}) = 0, \text{fp}_m(x_{1023}) = 2^{51} \\ x_{1024} &amp;= 2^{-1024} &amp;\leadsto &amp;\quad \text{fp}_s(x_{1024}) = 0, \text{fp}_e(x_{1024}) = 0, \text{fp}_m(x_{1024}) = 2^{50} \\ &amp;&amp;\ldots &amp;\\ x_{1074} &amp;= 2^{-1074} &amp;\leadsto &amp;\quad \text{fp}_s(x_{1074}) = 0, \text{fp}_e(x_{1074}) = 0, \text{fp}_m(x_{1074}) = 2^0 \\ \end{aligned} $$</p><p>再往后，即使是 Subnormal FP 也无法表示如此小的数，于是 $x_{1075}$ 终于归零。在此期间，我们经历了 1022 个 Normal FP，52 个 Subnormal FP，以及最后 1 个 0，共 1075 个值。我们可以用如下 Rust 代码验证这一点：</p><div class="gk-code hljs" data-gk-id="BLOCK4"><div class="gk-code-display"><pre><span class="line"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {</span><br><span class="line">    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">counter</span> = std::collections::HashMap::<span class="hljs-title function_ invoke__">new</span>();</span><br><span class="line">    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">x</span> = <span class="hljs-number">1f64</span>;</span><br><span class="line">    <span class="hljs-keyword">while</span> x != <span class="hljs-number">0</span>. {</span><br><span class="line">        x /= <span class="hljs-number">2.0f64</span>;</span><br><span class="line">        *counter.<span class="hljs-title function_ invoke__">entry</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;{:?}&quot;</span>, x.<span class="hljs-title function_ invoke__">classify</span>())).<span class="hljs-title function_ invoke__">or_insert</span>(<span class="hljs-number">0</span>) += <span class="hljs-number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    dbg!(counter);</span><br><span class="line">}</span><br><span class="gk-section gk-zip zipped" data-gk-sid="BLOCK4.SEC1" data-gk-type="zip"><span class="line"><span class="hljs-comment">// Output:</span></span><br><span class="line"><span class="hljs-comment">// [src/main.rs:8:5] counter = {</span></span><br><span class="line"><span class="hljs-comment">//     &quot;Zero&quot;: 1,</span></span><br><span class="line"><span class="hljs-comment">//     &quot;Normal&quot;: 1022,</span></span><br><span class="line"><span class="hljs-comment">//     &quot;Subnormal&quot;: 52,</span></span><br><span class="line"><span class="hljs-comment">// }</span></span><br></span></pre></div></div><h2 id="subnormal-fp-的支持性问题">Subnormal FP 的支持性问题</h2><p>最后，本文就 Subnormal FP 再作进一步讨论。</p><p>尽管 IEEE 754 定义了 Subnormal FP，这并不意味着它在所有场景下都被支持。在实际中，Subnormal FP 的支持可能面临如下限制：</p><ul><li>硬件本身不支持。这可能为了简化硬件设计，或者为了提高性能而舍弃了 Subnormal FP 的支持；</li><li>该功能被编程性地关闭了。某些硬件即便支持 Subnormal FP，其运算性能可能远不如 Normal FP。因此在一些场景下，为了提高浮点运算性能，程序会选择关闭 Subnormal FP 特性。</li></ul><p>例如，在 x86 架构中，可通过设置 CSR 寄存器的 <code>FTZ</code> 标志位来控制 Subnormal FP 的支持。</p><div class="gk-code hljs" data-gk-id="BLOCK5"><div class="gk-code-display"><pre><span class="line"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {</span><br><span class="line">    <span class="hljs-keyword">unsafe</span> {</span><br><span class="line">        <span class="hljs-keyword">use</span> core::arch::x86_64::{_mm_getcsr, _mm_setcsr, _MM_FLUSH_ZERO_ON};</span><br><span class="line">        _mm_setcsr(_mm_getcsr() | _MM_FLUSH_ZERO_ON);</span><br><span class="line">    }</span><br><span class="line">    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">x</span> = <span class="hljs-number">1.0f64</span>;</span><br><span class="line">    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">i</span> = <span class="hljs-number">0</span>;</span><br><span class="line">    <span class="hljs-keyword">while</span> x != <span class="hljs-number">0</span>. {</span><br><span class="line">        x /= <span class="hljs-number">2.0</span>;</span><br><span class="line">        i += <span class="hljs-number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;{}&quot;</span>, i); <span class="hljs-comment">// 1023</span></span><br><span class="line">}</span><br></pre></div></div><p>在上面的代码中，我们通过 <code>_mm_setcsr</code> 函数设置了 <code>FTZ</code> 标志位。该标志位的出现指示 CPU：当运算结果得到 Subnormal FP 时，直接将其截断为 0。因此，上述代码会在 1023 次后结束，而不是 1075 次。</p><p>以上的例子表明，Subnormal FP 不是一个可靠的特性。在实际应用中，可能因为硬件的限制或是某些库的设置，浮点运算无法得到 Subnormal FP 值。通常来说，我们不提倡依赖 Subnormal FP 进行计算以获得更高的精度。如果确实需要 Subnormal FP，我们应当在程序中显式地开启或检查这一特性，以确保计算的正确性。</p><br><blockquote><p class="cc">作者：hsfzxjy<br>链接：<span class="cc-link"></span><br>许可：<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">CC BY-NC-ND 4.0</a>.<br>著作权归作者所有。本文<b>不允许</b>被用作商业用途，非商业转载请注明出处。</p></blockquote><script>!function(){var n=document.querySelector("span.cc-link");n&&(n.innerHTML='<a href="'+location.href+'">'+location.href+"</a>")}()</script></div><div class="post__tags"><a href="/tags/Rust/">Rust</a><a href="/tags/Floating-Point/">Floating-Point</a><a href="/tags/Subnormal-FP/">Subnormal FP</a><a href="/tags/IEEE-754/">IEEE 754</a></div><script>window.__ams="ams"</script><div class="post-nav"><a href="/2024-10-03-art-museum/" class="pre">«美术馆</a><a href="/cloudflare-blog-acceleration/" class="next">老生常谈：使用 Cloudflare 自选 IP 加速站点访问»</a></div><div id="disqus_thread"><div id="no-comment"><h2>OOPS!</h2><span>A comment box should be right here...</span><span>But it was gone due to network issues :-(</span><span>If you want to leave comments, make sure you have access to&nbsp;<a target="_blank" rel="noopener" href="https://disqus.com">disqus.com</a>.</span></div><script>var disqus_shortname="hsfzxjy",disqus_identifier="repeatly-divide-one-until-zero/",disqus_title="一尺之槌，日取其半，1075日而竭",disqus_url="https://i.hsfzxjy.site/repeatly-divide-one-until-zero/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.defer=!0,e.src="https://"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(e),e.onerror=function(){document.getElementById("no-comment").classList.add("show")}}()</script><script id="dsq-count-scr" src="//hsfzxjy.disqus.com/count.js" async defer></script></div></div></main><section class="aside__group"><span class="aside__btn"><div lang="zh" class="github-btn"><a href="#" rel="noopener noreferrer" target="_blank" class="gh-btn"><span class="gh-ico"></span><span class="gh-text">FOLLOW ME</span></a><a href="#" rel="noopener noreferrer" target="_blank" class="gh-count"></a></div><script>window.GH_BUTTON={username:"hsfzxjy"}</script></span><aside class="aside__left"><div class="aside__menuList"><span class="aside__menuList-item__icon"><i class="icon-home"></i></span><a href="/" class="aside__menuList-item"><span lang="zh" class="font__ui">首页 / Home</span></a><span class="aside__menuList-item__icon current"><i class="icon-embed2"></i></span><a href="/categories/Tech/" class="aside__menuList-item current"><span lang="zh" class="font__ui">科技 / Tech</span></a><span class="aside__menuList-item__icon"><i class="icon-android"></i></span><a href="/categories/Soliloquy/" class="aside__menuList-item"><span lang="zh" class="font__ui">呓语 / Soliloquy</span></a><span class="aside__menuList-item__icon"><i class="icon-leaf"></i></span><a href="/categories/Life/" class="aside__menuList-item"><span lang="zh" class="font__ui">生活 / Life</span></a><span class="aside__menuList-item__icon"><i class="icon-bookmarks"></i></span><a href="/categories/Memo/" class="aside__menuList-item"><span lang="zh" class="font__ui">速记 / Memo</span></a><span class="aside__menuList-item__icon"><i class="icon-books"></i></span><a href="/categories/Series/" class="aside__menuList-item"><span lang="zh" class="font__ui">连载 / Series</span></a><span class="aside__menuList-item__icon"><i class="icon-sigma"></i></span><a href="/works/" class="aside__menuList-item"><span lang="zh" class="font__ui">项目 / Projects</span></a><span class="aside__menuList-item__icon"><i class="icon-earth"></i></span><a href="/links/" class="aside__menuList-item"><span lang="zh" class="font__ui">友链 / Links</span></a><span class="aside__menuList-item__icon"><i class="icon-wink"></i></span><a href="/about/" class="aside__menuList-item"><span lang="zh" class="font__ui">关于 / About</span></a><span class="aside__menuList-item__icon"><i class="icon-history"></i></span><a href="/aggr/" class="aside__menuList-item"><span lang="zh" class="font__ui">索引 / Index</span></a><span class="aside__menuList-item__icon"><i class="icon-rss2"></i></span><a href="/rss.xml" class="aside__menuList-item"><span lang="zh" class="font__ui">订阅 / RSS</span></a></div></aside><aside class="aside__right"><div id="toc" lang="zh" class="font__body"><div class="toc-toggler"></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E6%95%B0%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.</span> <span class="toc-text">浮点数的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fp64-%E7%9A%84%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%A1%A8%E7%A4%BA"><span class="toc-number">2.</span> <span class="toc-text">FP64 的二进制表示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#subnormal-fp"><span class="toc-number">3.</span> <span class="toc-text">Subnormal FP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%AF%86-1075"><span class="toc-number">4.</span> <span class="toc-text">解密 1075</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#subnormal-fp-%E7%9A%84%E6%94%AF%E6%8C%81%E6%80%A7%E9%97%AE%E9%A2%98"><span class="toc-number">5.</span> <span class="toc-text">Subnormal FP 的支持性问题</span></a></li></ol></div></div></aside></section><div id="footer" style="text-align:center" lang="zh" class="font__ui">© <a href="/" rel="nofollow">hsfzxjy 的博客.</a>&nbsp;Powered by&nbsp;<a rel="nofollow" target="_blank" href="https://hexo.io">Hexo.</a>&nbsp;<a rel="nofollow" target="_blank" href="https://github.com/hsfzxjy/byak-hexo">Theme</a>&nbsp;by&nbsp;<a rel="nofollow" target="_blank" href="https://github.com/hsfzxjy">hsfzxjy</a>.<div style="margin-top:10px"><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011202001249" style="display:inline-block;text-decoration:none;height:20px;line-height:20px"><img src="/img/beian.png" style="float:left" loading="lazy"><span style="float:left;height:20px;line-height:20px;margin:0 0 0 5px;color:#939393">粤公网安备44011202001249号</span></a><a target="_blank" style="display:inline-block;text-decoration:none;height:20px;line-height:20px" href="http://beian.miit.gov.cn/"><span style="float:left;height:20px;line-height:20px;margin:0 0 0 5px;color:#939393">粤ICP备2020075702号-1</span></a></div></div></body><script src="/dist/js/main.js" async defer></script></html>